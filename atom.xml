<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Hakan Tuncer's Blog]]></title>
  <link href="http://www.hakantuncer.com/atom.xml" rel="self"/>
  <link href="http://www.hakantuncer.com/"/>
  <updated>2017-07-09T23:23:08+02:00</updated>
  <id>http://www.hakantuncer.com/</id>
  <author>
    <name><![CDATA[Hakan Tuncer]]></name>
    <email><![CDATA[hakantuncer@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Continuous Deployment with Node.js, DynamoDB, AWS Elastic Beanstalk and CircleCI]]></title>
    <link href="http://www.hakantuncer.com/blog/2017/05/25/continuous-deployment-with-node-dot-js/"/>
    <updated>2017-05-25T07:48:55+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2017/05/25/continuous-deployment-with-node-dot-js</id>
    <content type="html"><![CDATA[<p>These days everybody is talking about DevOps and CI pipelines. Unicorn tech companies are building DevOps tools and CI pipelines as a service and bragging about their user friendly design and how easy it is to setup these pipelines on their branded platforms. This is all nice and useful, however, I can’t help but see another <a href="https://www.youtube.com/watch?v=qamzvLfX-Zo">silver bullet syndrome</a>.</p>

<p>Anyone who’s building non-trivial software systems long enough know that software development is hard. Especially with sizeable teams that are larger than only a few devs, it’s very easy to turn the system into <a href="https://vimeo.com/171704597">a big ball of mud</a> and get the codebase into a state that is difficult to understand and to reliably test in an automated fashion.</p>

<p>If you don’t have reliable automated tests with realistic test cases and good coverage, your CI pipeline is just a lie. So please stop treating your CI pipelines (that probably took you 10 minutes to create these days) as silver bullets.</p>

<p>All that said, if you have actually done the REAL work and payed attention to your codebase, your architecture and treated your tests as highly as your production code, then you can now go ahead and create your CI pipeline in 10 minutes and it will benefit you tremendously.</p>

<p>This is a follow-up on my previous blog posts where I did the real work and made my codebase clean and testable. You can find them here in two parts: <a href="http://www.hakantuncer.com/blog/2017/02/17/setting-up-continuous-integration-and-delivery-for-a-nodejs-rest-api/">Part 1</a> and <a href="http://www.hakantuncer.com/blog/2017/03/25/setting-up-continuous-delivery-for-a-node-dot-js-rest-api-part-2/">Part 2</a>. Having said that, these are no pre-requisites to this post by any means. Just continue reading if you’re only interested in the Continuous Delivery Pipeline itself, you should be perfectly fine.</p>

<h2>Why CircleCI</h2>

<p>I know it won&rsquo;t sound very exciting but there’s actually no particular reason. My two biggest requirements were FREE and SaaS. I obviously don’t want to pay a monthly fee for the CI pipeline of an open source hobby project. And I just want to use it SaaS style and don’t want to own anything. To name a few alternatives to <a href="https://circleci.com/">CircleCI</a> which are free for non-commercial open source projects and SaaS; there is <a href="https://www.visualstudio.com/team-services/">VSTS</a>, <a href="https://www.appveyor.com">AppVeyor</a> and <a href="https://travis-ci.org">Travis CI</a>. I used the first two, they’re all very good offerings, I would also like to carve some time to try Travis in the future if I can.</p>

<h2>Configuring the Pipeline with CircleCI</h2>

<p>There’s an <a href="https://circleci.com/docs/1.0/configuration/">in depth documentation</a> that describes the ins and outs of CircleCI and how to configure your pipeline for various needs and scenarios. It starts with:</p>

<blockquote><p>CircleCI automatically infers settings from your code, so it’s possible you won’t need to add any custom configuration.
<br/><br/>
If you do need to tweak settings, you can create a circle.yml in your project’s root directory. If this file exists, CircleCI will read it each time it runs a build.</p></blockquote>

<p>The automatic inference of settings does not completely work for <a href="https://github.com/hakant/HackathonPlannerAPI">my codebase</a>. There are certain build steps that I want to override and specify my specific need — like transpiling TypeScript and running tests against a DynamoDB emulator, so I need to create a <strong>circle.yml</strong> file in the project root directory.</p>

<h2>Primary Steps of a CircleCI Pipeline</h2>

<p>When we talk about a CI pipeline, we’re actually talking about a series of steps that are executed one after the other in a deterministic and repeatable manner.</p>

<blockquote><p>The <strong>circle.yml</strong> file has seven primary sections. Each section represents a phase of the Build-Test-Deploy process:
<br/><br/>
<strong>machine</strong>: adjust the behavior of the virtual machine (VM)
<br/><br/>
<strong>checkout</strong>: checkout and clone code from a repository
<br/><br/>
<strong>dependencies</strong>: install your project’s language-specific dependencies
<br/><br/>
<strong>database</strong>: prepare a database for tests
<br/><br/>
<strong>compile</strong>: compile your project
<br/><br/>
<strong>test</strong>: run your tests
<br/><br/>
<strong>deployment</strong>: deploy your code to your web servers</p></blockquote>

<p>For each of these sections CircleCI automatically infers commands based on the characteristics of the codebase.</p>

<blockquote><p>You can specify when to run custom commands relative to CircleCI’s inferred commands using three special keys:
<br/><br/>
<strong>pre</strong>: run before inferred commands
<br/><br/>
<strong>override</strong>: run instead of inferred commands
<br/><br/>
<strong>post</strong>: run after inferred commands</p></blockquote>

<h2>CircleCI configuration of Hackathon Planner</h2>

<p>I want to create the CI pipeline for <a href="https://github.com/hakant/HackathonPlannerAPI">Hackathon Planner’s REST API</a>. This API is built with <a href="https://nodejs.org">Node.js</a>, <a href="http://expressjs.com">ExpressJS</a>, <a href="http://www.typescriptlang.org">TypeScript</a>, <a href="https://aws.amazon.com/dynamodb/">DynamoDB</a> and deployed to <a href="https://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk</a>.</p>

<br/>


<h3>machine</h3>

<p>My REST API is running on node 5.11. So I want to use the same version of node to run my tests. </p>

<p>I also need Java Development Kit (jdk) to run the DynamoDB emulator. My Unit/Integration tests will run against this emulated DynamoDB instance.</p>

<p>After node and jdk is installed on the machine, I need to run 3 commands to download, extract and run DynamoDB emulator (under section “post”):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
</pre></td><td class='code' width='100%'><pre><code class='text'><div class='line'>machine:
</div><div class='line'>  node:
</div><div class='line'>    version: 5.11
</div><div class='line'>  java:
</div><div class='line'>    version: openjdk7
</div><div class='line'>  post:
</div><div class='line'>    - curl -k -L -o dynamodb-local.tgz http://dynamodb-local.s3-website-us-west-2.amazonaws.com/dynamodb_local_latest.tar.gz
</div><div class='line'>    - tar -xzf dynamodb-local.tgz
</div><div class='line'>    - &quot;java -Xms1024m -Xmx1024m -Djava.library.path=~/DynamoDBLocal_lib -jar ~/DynamoDBLocal.jar --port 8000&quot;: background: true</div></code></pre></td></tr></table></div></figure>




<br/>


<h3>compile</h3>

<p>In this part of the build step, I’m taking over the inferred behavior of CircleCI using the “override” keyword.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='text'><div class='line'>compile:
</div><div class='line'>  override:
</div><div class='line'>    - tsc -p .</div></code></pre></td></tr></table></div></figure>


<p>“tsc” is the TypeScript compiler and the “-p” flag tells it to compile the project given a valid configuration file (tsconfig.json). In my codebase, this file is located in the root directory.</p>

<p>“tsconfig.json” file below tells the compiler to transpile all TypeScript files in the folder (recursively) except the contents of the “node_modules” folder. For more info on TypeScript compiler options, <a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html">checkout this documentation</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
</pre></td><td class='code' width='100%'><pre><code class='json'><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
</div><div class='line'>        <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;commonjs&quot;</span><span class="p">,</span>
</div><div class='line'>        <span class="nt">&quot;sourceMap&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</div><div class='line'>        <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;es6&quot;</span><span class="p">,</span>
</div><div class='line'>        <span class="nt">&quot;moduleResolution&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
</div><div class='line'>        <span class="nt">&quot;allowJs&quot;</span><span class="p">:</span> <span class="kc">false</span>
</div><div class='line'>    <span class="p">},</span>
</div><div class='line'>    <span class="nt">&quot;exclude&quot;</span><span class="p">:</span> <span class="p">[</span>
</div><div class='line'>        <span class="s2">&quot;node_modules&quot;</span>
</div><div class='line'>    <span class="p">]</span>
</div><div class='line'><span class="p">}</span></div></code></pre></td></tr></table></div></figure>




<br/>


<h3>test</h3>

<p>Now that Node.js and DynamoDB is installed on the build machine (actually a container) and the application is transpiled into ES6 JavaScript that node can directly understand, it’s now time to run all the tests.</p>

<p>Once again, I’m taking over the inferred behavior of CircleCI using the “override” keyword and call into a predefined npm script.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='text'><div class='line'>test:
</div><div class='line'>  override:
</div><div class='line'>    - npm test</div></code></pre></td></tr></table></div></figure>


<p>When the “npm test” command runs, behind the scenes npm looks into the “scripts” section of the “package.json” file to figure out what to execute.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class='json'><div class='line'><span class="err">//</span> <span class="err">package.json</span>
</div><div class='line'><span class="s2">&quot;scripts&quot;</span><span class="err">:</span> <span class="p">{</span>
</div><div class='line'>    <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;node ./bin/www&quot;</span><span class="p">,</span>
</div><div class='line'>    <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;node ./tests/runUnitTests.js&quot;</span>
</div><div class='line'>  <span class="p">}</span></div></code></pre></td></tr></table></div></figure>


<p></p>

<p>Via this lookup, it’s going to find and execute the “runUnitTests.js” file, which loads the jasmine test framework and executes the tests via another configuration file — “jasmine.json”.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class='javascript'><div class='line'><span class="c1">// runUnitTests.js</span>
</div><div class='line'><span class="kd">var</span> <span class="nx">Jasmine</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jasmine&#39;</span><span class="p">);</span>
</div><div class='line'><span class="kd">var</span> <span class="nx">jas</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Jasmine</span><span class="p">();</span>
</div><div class='line'><span class="nx">jas</span><span class="p">.</span><span class="nx">loadConfigFile</span><span class="p">(</span><span class="s1">&#39;./tests/unit/jasmine.json&#39;</span><span class="p">);</span>
</div><div class='line'><span class="nx">jas</span><span class="p">.</span><span class="nx">execute</span><span class="p">();</span></div></code></pre></td></tr></table></div></figure>


<p>“jasmine.json” file specifies where the tests and test helpers are and adjusts certain test behaviour. For example here I specified that I don’t want tests to stop running on failures because I would like to get a complete feedback. I also specified that tests should run in random order. All my tests in this project (unit / integration) are isolated from each other, so I should be able to run them in any order.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
</pre></td><td class='code' width='100%'><pre><code class='text'><div class='line'>// jasmine.json
</div><div class='line'>{
</div><div class='line'>  &quot;spec_dir&quot;: &quot;tests/unit&quot;,
</div><div class='line'>  &quot;spec_files&quot;: [
</div><div class='line'>    &quot;./*[sS]pec.js&quot;
</div><div class='line'>  ],
</div><div class='line'>  &quot;helpers&quot;: [
</div><div class='line'>    &quot;./helpers/*.js&quot;
</div><div class='line'>  ],
</div><div class='line'>  &quot;stopSpecOnExpectationFailure&quot;: false,
</div><div class='line'>  &quot;random&quot;: true
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure>


<p>Only when all tests run successfully, will the build continue to the next step and deploy the application to production.</p>

<h2>From CI to CD — Taking the next step</h2>

<p>At this point I’ve created a complete CI pipeline where at each commit to a branch a build will kick in, compile the codebase and run all the tests. Now all developers can integrate their work as early as possible and get continuous feedback from the build server.</p>

<p>However, if you and your team has invested into the CI pipeline enough that you trust the depth and breadth of feedback you receive from it, you can take the next step into continuous deployment.</p>

<p>Of course nothing forces you to deploy directly to production, automatically deploying to a staging environment for a final round of Q/A is definitely a more common approach.</p>

<br/>


<h3>dependencies &amp; deployment</h3>

<p>Below are the build steps where I install <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3.html">AWS Elastic Beanstalk CLI</a> with its dependencies and call the deploy command for the right branch and profile.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
</pre></td><td class='code' width='100%'><pre><code class='text'><div class='line'>dependencies:
</div><div class='line'>  pre:
</div><div class='line'>    - sudo apt-get install python-dev
</div><div class='line'>    - sudo pip install &#39;awsebcli==3.7.4&#39; --force-reinstall
</div><div class='line'>deployment:
</div><div class='line'>  production:
</div><div class='line'>    branch: master
</div><div class='line'>    commands:
</div><div class='line'>      - eb deploy --profile default</div></code></pre></td></tr></table></div></figure>


<p>It turns out that “python-dev” tools is a pre-requisite for AWS EB CLI. Notice that I only deploy the master branch to production. None of the other branch builds will run this deployment step.</p>

<p>If you think about what needs to happen behind the scenes for an actual deployment process, this configuration seems to be too little. For example, how does EB CLI know where to deploy the application in AWS ? or how does CircleCI authenticate with AWS on my behalf to make this deployment? So indeed, this is not the full story. There are two more pieces of the puzzle that I want to show you quickly.</p>

<p>By convention, “.elasticbeanstalk/config.yml” is the path that EB CLI looks for during the deployment. One of the key things in this file is the first section where the environment name is defined. “hackathonplanner” is the environment that is uniquely defined under my AWS account and this is how EB CLI knows where to deploy the package to.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
</pre></td><td class='code' width='100%'><pre><code class='text'><div class='line'>//.elasticbeanstalk/config.yml
</div><div class='line'>branch-defaults:
</div><div class='line'>  master:
</div><div class='line'>    environment: hackathonplanner
</div><div class='line'>global:
</div><div class='line'>  application_name: Hackathon-Planner
</div><div class='line'>  default_ec2_keyname: null
</div><div class='line'>  default_platform: 64bit Amazon Linux 2016.03 v2.1.3 running Node.js
</div><div class='line'>  default_region: eu-central-1
</div><div class='line'>  profile: eb-cli
</div><div class='line'>  sc: git</div></code></pre></td></tr></table></div></figure>


<p>The answer of the second question, which is, “how does CircleCI authenticate on my behalf to make this deployment happen” is below:</p>

<p><img src="http://www.hakantuncer.com/assets/ContinuousIntegration_Part3/AWS-Keys.png" alt="CircleCI AWS Keys Page" /></p>

<p>As you see, CircleCI has built in first class support for AWS. Just like it’s recommended on the configuration page above, I’ve created a unique <a href="https://aws.amazon.com/iam/">IAM user</a> in AWS and gave it deployment permissions to the “hackathonplanner” environment. Then I copy and pasted the “Access Key ID” and “Secret Access Key” over from AWS to CircleCI. Now CircleCI can deploy to my environment on my behalf. It’s that easy.</p>

<h2>Build results</h2>

<p>At the time of this writing I’ve got <a href="https://circleci.com/gh/hakant/HackathonPlannerAPI">72 builds queued and ran</a> both green and red.</p>

<p>If you look at one of the successful builds, let’s take <a href="https://circleci.com/gh/hakant/HackathonPlannerAPI/72">the last one</a>, you can see each and every step that were executed and their respective logs. </p>

<p>After uncollapsing the test step and reading through the logs, I noticed that for some reason my tests can not tear down DynamoDB tables anymore. It doesn’t fail any test since each test creates new tables with random names, so the build is still green and everything is fine. I need to dig in and understand what has changed in the meantime — while I was not paying attention. </p>

<p>This reminded me of <a href="https://vimeo.com/channels/1203692/204428794">a recent talk from Ian Cooper</a> where 17 mins in, he asks the audience if they deployed a piece of software and left it alone for a year, what would they expect when they come back. Would it still be up and running correctly or not? So the point is, things keep changing around our software (especially in the cloud) and when nothing is done, our software decays by itself.</p>

<p>Anyway, after this little segway into a different subject, I think it’s time to stop here. Thanks for reading and if you have any comments or questions you can write it below or tweet me at <a href="https://twitter.com/hakant">@hakant</a>!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting up Continuous Delivery for a Node.js REST API - Part 2]]></title>
    <link href="http://www.hakantuncer.com/blog/2017/03/25/setting-up-continuous-delivery-for-a-node-dot-js-rest-api-part-2/"/>
    <updated>2017-03-25T09:48:02+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2017/03/25/setting-up-continuous-delivery-for-a-node-dot-js-rest-api-part-2</id>
    <content type="html"><![CDATA[<h2>Introduction</h2>

<p><a href="http://www.hakantuncer.com/blog/2017/02/17/setting-up-continuous-integration-and-delivery-for-a-nodejs-rest-api/">In the first part</a> of this blog post, I shared some fundamental ideas that form as background information for what I want to achieve here. So if you haven’t read that one yet, I recommend you to <a href="http://www.hakantuncer.com/blog/2017/02/17/setting-up-continuous-integration-and-delivery-for-a-nodejs-rest-api/">check it out</a>.</p>

<p>A few months back, I decided to convert my <a href="https://github.com/hakant/HackathonPlannerAPI">hobby project — Hackathon Planner API</a> from pure Javascript to TypeScript and <a href="http://www.hakantuncer.com/blog/2016/11/08/converting-a-node-dot-js-express-api-to-typescript/">wrote a blog post about it</a>. This time I sat down to build an Automated Test Suite and a <a href="https://www.martinfowler.com/articles/continuousIntegration.html">Continuous Delivery (CD)</a> pipeline around it.</p>

<p>Effective automated testing is a natural prerequisite for Continuous Integration &amp; Delivery. How can it not be? If you’re not getting quick and broad feedback from your software, how can you delivery frequently? So having a testable architecture and an effective test strategy is very crucial. Let’s dive in.</p>

<h2>Right Architecture for Subcutaneous Testing</h2>

<p>I’m a huge fan of <a href="https://martinfowler.com/bliki/SubcutaneousTest.html">subcutaneous testing</a>. This type of testing starts right under the UI layer with a large scope (which preferably spans all the way down to the data store) can have a great return on investment. On <a href="https://m.facebook.com/notes/kent-beck/making-making-manifesto/857477870951745/">Kent Beck’s feedback chart</a> it would score high up and to the right: <strong>fast and broad feedback</strong>.</p>

<p><img src="http://www.hakantuncer.com/assets/ContinuousIntegration_Part2/Kent_Beck_Feedback_Chart.png" alt="Kent Beck's Feedback Chart" /></p>

<p>So now that we want to target our automated tests below the delivery mechanism layer (UI, Network etc.), this is where an important architectural decision comes into question. What is the main boundary of my application? Where does my significant business logic start? Plus, how can I make my application boundary very visible and clear to all developers? If you follow down this path of thinking, one nice place to end up is a combination of <a href="https://en.wikipedia.org/wiki/Command_pattern">command</a> and <a href="https://en.wikipedia.org/wiki/Mediator_pattern">mediator</a> patterns.</p>

<p>The combination of these patterns is about sending commands down through a very narrow facade, where every command has a very clean input and output “<a href="https://en.wikipedia.org/wiki/Data_transfer_object">data transfer objects</a>” or POCO’s, POJO’s.. whatever you like to call them depending on your stack of choice. They’re simply objects that carry data and no behavior. </p>

<p>To be able to use this pattern in <a href="https://github.com/hakant/HackathonPlannerAPI">my REST API</a>, I’ve created a simple module in TypeScript that allows me to execute commands and optionally get results from them. It’s here: <a href="https://github.com/hakant/TypeScriptCommandPattern">TypeScriptCommandPattern</a>.</p>

<p>In the example below, you can see how a test request is sent down to the executor and a result is returned back.</p>

<br/>


<script src="https://gist.github.com/hakant/837f08708feed35b2d02b99269f0e916.js"></script>


<p>And here is how a “Hello World” style command handler looks like. Notice that it has a clean request and response definitions. At the end of the implementation we make sure that the handler is registered and mapped to the request. In this structure handlers are singleton objects and they can later be resolved by the type of the request and then get executed.</p>

<br/>


<script src="https://gist.github.com/hakant/c4c29c9d6e98fb3a85c674a4b0ad6b28.js"></script>


<h2>Using this pattern in a real world Node.js REST API</h2>

<p>One great architectural benefit of this pattern is that it allows you to nicely separate an application into many independent scenarios — <a href="https://lostechies.com/jimmybogard/2015/07/02/ndc-talk-on-solid-in-slices-not-layers-video-online/">vertical slices</a>. Take a look at <a href="https://github.com/hakant/HackathonPlannerAPI/tree/master/scenarios">these scenarios from Hackathon Planner</a>:</p>

<p><img src="http://www.hakantuncer.com/assets/ContinuousIntegration_Part2/Hackathon_Planner_Scenarios.png" alt="Kent Beck's Feedback Chart" /></p>

<p>Each of these TypeScript modules are a vertical slice. They’re the full story. Yes they make use of other external modules when necessary, but when developers read through these scenarios, they get the full picture. And if code sharing between these scenarios are done wisely (with correct abstractions), then a change in one scenario is contained and does not necessarily affect any others.</p>

<p>Let’s take a look at the implementation of one of these scenarios and extract some key properties. Let’s pick the scenario in “GetIdeas.ts”:</p>

<br/>


<script src="https://gist.github.com/hakant/6c38b895807a4d721c8c367a5117826f.js"></script>


<ul>
<li><p>Line 3–4: Imports the base async command handling structure and also the container to register itself at the end of the file.</p></li>
<li><p>Line 6–9: External modules that this handler uses.</p></li>
<li><p>Line 11–12: A module that is used by multiple scenarios. Be careful, I say “used” not “reused”. Remember the “<a href="http://udidahan.com/2009/06/07/the-fallacy-of-reuse/">fallacy of reuse</a>”. This module (IdeaPrePostProcessor) is used to massage and sanitize the Idea entities before they’re sent to the user interface and before they’re written to the database. Multiple scenarios use this module the exact same way and for the same need. There are no slight variations per scenario, that’s why it’s a right abstraction and that’s why it’s “use”, not “reuse”.</p></li>
<li><p>Line 14–16: Since our handler is an async one (because it’s accessing the database), it implements the AsyncCommandHandler&lt;TRequest, TResponse> and implements the HandleAsync method that returns a Promise of GetIdeasReponse object.</p></li>
<li><p>Line 17–38: Complete vertical implementation of the handler. It’s basically scanning the database for all the ideas, sorting them based on an algorithm, encapsulating them in the response object and return. Notice that at line 25, the “await” keyword is used. It’s a simple and very readable way of representing asynchronous code. It exists in recent versions of TypeScript as well as in ES7.</p></li>
<li><p>Line 42–47: Request and response objects that are used by this handler are defined and exported. These objects should be available to the rest of the application as well.</p></li>
<li><p>Line 50–52: A singleton instance of the handler is instantiated and registered to the type of the request object. Based on application needs, this can be made more complex and sophisticated. Statically typed languages incorporate lots of ideas around IoC containers whereas dynamically typed languages like javascript, not so much. Also keep in mind that these TypeScript generic constructs only exist at design time. They don’t exist in the transpiled javascript and that makes it impossible to discover or scan these constructs at runtime.</p></li>
</ul>


<h2>Simple &amp; Stupid ExpressJS Routes</h2>

<p>If you have experience with building MVC type web applications or REST API’s you’re probably familiar with the idea of controllers. Routes are the same concept in <a href="http://expressjs.com">ExpressJS</a>. Keeping your routes and controllers nice and clean is a good discipline to have. Remember, we want to contain our core application logic and try not to leak it outside as much as possible. Not to frameworks, not to external libraries.</p>

<p>Hackathon Planner’s most significant route is the Ideas route where ideas are being CRUD and a few further actions are taken against them. Code below shows the routes defined in there. Notice how clean it reads and how all business logic is kept out of it. The only thing these routes do is to pass requests and responses up and down the stream.</p>

<br/>


<script src="https://gist.github.com/hakant/85fbfa3f3d77f82c2b17457a96356d09.js"></script>


<h2>Testing all the Scenarios</h2>

<p>The structure of the software created so far lends itself nicely to the subcutaneous testing style discussed earlier. So I take advantage of this by taking the following actions in the tests:</p>

<ul>
<li><p>Remove the ExpressJS layer that normally sits on top. This is a delivery mechanism and I don’t necessarily need it to test my business logic — since I’ve already separated that logic clearly out of this layer.</p></li>
<li><p>Load all scenario handlers together with the real data store (or a realistic emulator).</p></li>
<li><p>Shoot requests &amp; verify responses.</p></li>
<li><p>In some cases, if verifying the response alone isn&rsquo;t sufficient, go further and directly check the data store for verifying the side effects. In my case it wasn’t necessary, I could both act and verify using my handlers alone.</p></li>
</ul>


<p>Let’s take a look at a few of these tests. Below is a part of <a href="https://jasmine.github.io/">jasmine</a> spec that tests inserting and fetching ideas by running several scenarios.</p>

<br/>


<script src="https://gist.github.com/hakant/a2d1c53fdaa5e7c0d99eeb8e8b4022e2.js"></script>


<p>Here are a few key properties of these tests:</p>

<ul>
<li><p>Lines 17–26: Before each test new NoSql tables are created and after each test they’re dropped. This makes every test run in a sandbox isolated from one another. So they can all run in any random order. In general, this is a characteristic of a unit test, not an integration test. So here we have the best of both worlds!</p></li>
<li><p>All tests run against a DynamoDb local emulator. So the feedback coming from the database is real. I trust that the Amazon team behind DynamoDb makes sure that the emulator behaves exactly the same as the real one in the cloud.</p></li>
<li><p>Integration tests are slow right? No, not if you don’t test against user interfaces, or have many number of network calls, or use slow data storage devices. These tests don’t get into any complexity of testing against a UI; they don’t bring up a web server and make excessive number of network calls; and they make use of an in memory database emulator running on the same box. These 15 tests run in ~2 seconds even though each of them setup and tear down their data tables. So you can run quite a lot of these in a few minutes.</p></li>
<li><p>By their nature, integration tests are broad. They give broad feedback. But this is a trade off because when they fail, you have to dig a little deeper to understand exactly what failed in comparison to the unit tests that are tiny and focused. But that’s a tradeoff I like to make in general.</p></li>
<li><p>Having said that, I’m by no means trying to trash the value of unit tests here. If I see the need — like any piece of code that is significant for the system and does interesting things — I’ll go and unit test that part in isolation. Especially code that’s heavy on algorithmic work. So unit tests are valuable when they’re implemented for the right code against the right abstraction.</p></li>
<li><p>Last but not least, these type of tests (i.e subcutaneous) interacts with the system right at the outside of the significant boundary. This means as long as feature requirements don’t change, these tests remain valid and useful. They can survive large refactorings because they’re not coupled to the implementation details! This is a huge deal in my opinion.</p></li>
</ul>


<p>In next and the last part of this series, I would like to write a few things about my experience with setting up a CD pipeline using <a href="https://circleci.com">CircleCI</a>, which transpiles all TypeScript files, installs dependencies, runs tests and deploys to <a href="https://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk</a>.</p>

<p>Thanks for reading.</p>

<p>~ Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting up Continuous Delivery for a Node.js REST API - Part 1]]></title>
    <link href="http://www.hakantuncer.com/blog/2017/02/17/setting-up-continuous-integration-and-delivery-for-a-nodejs-rest-api/"/>
    <updated>2017-02-17T22:01:28+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2017/02/17/setting-up-continuous-integration-and-delivery-for-a-nodejs-rest-api</id>
    <content type="html"><![CDATA[<h2>Introduction</h2>

<p>A few months back, I decided to convert my <a href="https://github.com/hakant/HackathonPlannerAPI">hobby project &ndash; Hackathon Planner API</a>
from pure Javascript to <a href="https://www.typescriptlang.org/">TypeScript</a> and <a href="http://www.hakantuncer.com/blog/2016/11/08/converting-a-node-dot-js-express-api-to-typescript/">wrote a blog post about it</a>.
This time I sat down to build an Automated Test Suite and a Continuous Delivery (CD) pipeline around it.</p>

<p>Hackathon Planner API is essentially a REST API written in <a href="https://nodejs.org/en/">Node.js</a> and <a href="http://expressjs.com/">Express</a>.
Stores its data in a NOSQL database (<a href="https://aws.amazon.com/dynamodb/">DynamoDB</a>) and hosted on
<a href="https://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk</a>.</p>

<p>I thought I would best write this up in 2 blog posts &ndash; due to the fact that most of what I did in this repository
is based on some fundamental concepts which I&rsquo;ve been reading and thinking about in the last few years.</p>

<p>In this post, I would like to touch on a few of these ideas that guided me in my refactoring decisions for
making the codebase cleaner, less coupled and more testable.</p>

<p>In the next post, I&rsquo;ll share some more details and examples from the codebase.</p>

<h2>Enabling Continuous Integation &amp; Delivery</h2>

<p>If you are not very familiar with the terms &ldquo;Continuous Integration&rdquo; (CI) or &ldquo;Continuous Delivery&rdquo; (CD) I suggest checking out
<a href="https://www.thoughtworks.com/continuous-integration">ThoughtWorks website</a>
and <a href="https://www.martinfowler.com/articles/continuousIntegration.html">Martin Fowler&rsquo;s post</a> to learn more about
these software development practices.</p>

<p>I&rsquo;ve intentionally used the word &ldquo;enabling&rdquo; in the title above. I&rsquo;ve seen many brownfield projects
where the team wants to start practicing CI; however, depending on the age
and size of the project this may turn out to be <strong>very difficult, sometimes even impossible</strong>. These are not
practices that can be applied to a project only from the outside. They can&rsquo;t always be easily introduced as
an afterthought either, they have to be built and enabled inside out; and it takes time &amp; effort to get there!</p>

<p>The way I see it; practicing CI or CD are kind of a &ldquo;high performance state&rdquo; a team reaches after getting A
LOT OF THINGS RIGHT; especially around system architecture and automated testing. Skills of the team members
also matter, big time! Committing to trunk everyday without breaking stuff and more importantly, always introducing
a right amount of tests at each new check-in is not an easy task for everyone.</p>

<h2>Clean Architecture</h2>

<p>One of the important lessons I learned from Robert C. Martin&rsquo;s talk <a href="https://vimeo.com/97530863">Clean Architecture and Design</a>
(more resources <a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html">here</a>) is that, it&rsquo;s
almost always a good idea to keep your business logic, the heart of your system, clean from external concerns like
frameworks and delivery mechanisms (web frameworks, native application hosts, operating systems etc.).</p>

<p>This is beneficial in many ways. Keeps your business logic clean and free from the complexities of the environment around
it. It also enables great automated testing capabilities which is probably the most important prerequisite of
&ldquo;Continuous Integration&rdquo; way of working and delivering software.</p>

<p>Btw, just because I&rsquo;m referring to Robert C. Martin&rsquo;s clean architecture here doesn&rsquo;t mean I agree with everything
he&rsquo;s suggesting there &ndash; like f.ex his claim on: &ldquo;storage is an insignificant detail&rdquo;. I&rsquo;d still like to think of
storage interaction as an integral part of my system. More on that in a bit.</p>

<h2>Vertical Slices instead of Horizontal Layers</h2>

<p>We&rsquo;ve all built <a href="https://en.wikipedia.org/wiki/Multitier_architecture">n-tier applications</a> where software is structured
in horizontal layers &ndash; most typical layers being Presentation, Business and Data Access. I&rsquo;ve built many
applications in this way and it&rsquo;s almost certain that I&rsquo;ll come across many others in the future.</p>

<p>What&rsquo;s the promise of n-tier and how did it become so widespread? I think this sentence
<a href="https://en.wikipedia.org/wiki/Multitier_architecture">from wikipedia</a> sums it up:</p>

<blockquote><p>N-tier application architecture provides a model by which developers can create flexible and
reusable applications.</p></blockquote>

<p>In recent years; gotten tired of repeating problems introduced by organically grown n-tier applications &ndash; like
tight-coupling, bloated classes or services with multiple responsibilities,
<a href="https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction">organically introduced premature/wrong abstractions</a>;
all leading up to code that has become unreadable and hard to reason about.
You know you&rsquo;re in a &ldquo;generic, reusable n-tier application&rdquo; when you have to jump to definitions up and down
OVER AND OVER AGAIN in order get a slightest clue about what a specific scenario is trying to achieve.</p>

<p>Luckily, there are alternative ideas in the community. One of my favorites is the direction <a href="https://twitter.com/jbogard">Jimmy Bogard</a> is taking
in his talk <a href="https://lostechies.com/jimmybogard/2015/07/02/ndc-talk-on-solid-in-slices-not-layers-video-online/">SOLID in Slices not Layers</a>,
and his library <a href="https://github.com/jbogard/MediatR">MediatR</a> that I&rsquo;ve come to learn and love in the
last few years.</p>

<p>I&rsquo;ve built a few applications using MediatR where I implemented all scenarios (think of these as endpoints in a
REST API) in vertical slices and kept the shared code between them to a minimum. I really enjoyed the
outcome. Readability, <a href="https://en.wikipedia.org/wiki/Cohesion_(computer_science)" >cohesion</a> and
<a href="https://lostechies.com/jimmybogard/2016/10/24/vertical-slice-test-fixtures-for-mediatr-and-asp-net-core/">testability</a>
of these applications went really up.</p>

<p>Recently I listened <a href="https://www.dotnetrocks.com/?show=1405">Scott Allen on a podcast</a> where he mentioned
he&rsquo;s also a fan of vertical slicing and he has a <a href="http://odetocode.com/blogs/scott/archive/2016/11/29/addfeaturefolders-and-usenodemodules-on-nuget-for-asp-net-core.aspx">blog post on a related idea</a>.</p>

<p>One other lecture I recommend seeing is by Udi Dahan from NDC Oslo 2016: <a href="https://vimeo.com/131757759">Business Logic, a different perspective</a>
where he talks about <a href="http://udidahan.com/2009/06/07/the-fallacy-of-reuse/">the fallacy of reuse</a>.</p>

<p>Last but not least, I wrote a tiny <a href="https://github.com/jbogard/MediatR">MediatR</a> style
<a href="https://github.com/hakant/TypeScriptCommandPattern">application/command facade in TypeScript</a>. I do make use
of this module in <a href="https://github.com/hakant/HackathonPlannerAPI">HackathonPlannerAPI</a> and I&rsquo;ll write more about
it in my next post.</p>

<h2>Resist the temptation of sharing and reusing code unless you have a good justification and the right abstraction</h2>

<p>Before you decide to share code between application scenarios, think twice, think three times. If you really have
to do it, make sure you build a very clear interface around that component or module. Like Udi Dahan says in his
talk (shared above), USE this component from multiple scenarios, do not RE-USE it: If you find yourself tweaking the
component for each new scenario that&rsquo;s using it, you probably got the boundary wrong. Find the right boundary or
refactor this component back into the scenarios and stop sharing/reusing it.</p>

<p>In <a href="https://medium.com/@rdsubhas/10-modern-software-engineering-mistakes-bc67fbef4fc8#.k139s48qo">one of my favorite medium posts</a>
I&rsquo;ve read recently, the author really nails it:</p>

<blockquote><p>When Business throws more and more functionality (as expected), we sometimes react like this:
<br/><br/>
<img src="http://www.hakantuncer.com/assets/ContinuousIntegration_Part1/Shared_Logic_1.png" alt="Shared Business Logic-1" />
<br/><br/>
Instead, how should we have reacted:
<br/><br/>
<img src="http://www.hakantuncer.com/assets/ContinuousIntegration_Part1/Shared_Logic_2.png" alt="Shared Business Logic-1" />
<br/><br/></p></blockquote>

<h2>Unit or Integration&hellip; Let&rsquo;s call them all TESTING.</h2>

<p>For a good chunk of my development career, I was told that the &ldquo;unit&rdquo; in unit test is a class. So as a result,
my programming style evolved in a way that I always felt the need to design my classes with this type of testing
in mind: always being able to isolate a class from its surroundings.</p>

<p>I understand that some call this <a href="http://david.heinemeierhansson.com/2014/test-induced-design-damage.html">Test-induced design damage</a>.
Somehow in the world of C#, using Dependency Injection and programming against interfaces still feels very natural
to me. So for me, this is not a big deal and I still find it useful to be able to swap things in and out as
necessary and in every level of my implementation.</p>

<p>However, what I&rsquo;ve come to learn eventually is this: <strong>coupling your tests to your implementation details will
kill you</strong>. Just like <a href="https://vimeo.com/68375232">Ian Cooper explains in his brilliant talk at NDC Oslo</a>. So
if you&rsquo;re writing tests for each and every single one of your classes, it&rsquo;s very likely that you&rsquo;re doing it wrong
and soon you&rsquo;ll find out that your tests are slowing you down instead of giving you the feedback and agility you
were hoping for when you started.</p>

<p>Instead, <strong>find your significant boundaries</strong>. Meaningful boundaries that are composed of one or more classes and
that represent business needs. The key is this: even if your implementation details change, after let&rsquo;s say a BIG
refactoring, your tests SHOULD NOT need to change.</p>

<p>What is a better significant boundary than the whole application boundary? This is essentially what a MediatR style
pattern gives you. One narrow facade for your whole application. What a great boundary to write your tests against!</p>

<h2>Speed of tests matter but technology is changing too</h2>

<p>One big reason (heck, maybe the only reason) why people will tell you to design your system in a
way that you can swap out your database in favor of a test double (f.ex by using a repository pattern) is the speed
of tests.</p>

<p>This could be a necessary evil back in the days where databases and infrastructure was bulky and slow. But is
this still true? For <a href="https://github.com/hakant/HackathonPlannerAPI">Hackathon Planner API project</a>
I wrote 15 tests which execute all application scenarios against a <a href="https://aws.amazon.com/blogs/aws/dynamodb-local-for-desktop-development/">DynamoDB Local Emulator</a>,
so nothing is being swapped in or out on the application side but each test sets up and tears down the NOSQL
document store &ndash; so that all tests are completely isolated from each other.</p>

<p>The result is amazing. It takes ~2 seconds to run all the tests. Let&rsquo;s say if my application grows in
size in the future and that I had to execute 300 tests, it would still take me below a minute to
run all the tests!</p>

<p>I know this example will not represent every project out there in the wild for different sorts of reasons
but when it does, it definitely blurs the line between &ldquo;Service&rdquo; and &ldquo;Unit&rdquo; tests in
<a href="https://martinfowler.com/bliki/TestPyramid.html">the test pyramid</a>:</p>

<br/>


<p><img src="https://martinfowler.com/bliki/images/testPyramid/test-pyramid.png" width="400" alt="Test-Pyramid" /></p>

<br/>


<p>Thanks for reading. In Part 2 there will be code, I promise.</p>

<blockquote><p><strong>Update</strong>:
<br/><br/></p>

<p>Part 2 is now available! You can <a href="http://www.hakantuncer.com/blog/2017/03/25/setting-up-continuous-delivery-for-a-node-dot-js-rest-api-part-2/">reach it here</a>.</p></blockquote>

<p>~Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[5 Quirks of Converting a Node.js Express API to TypeScript]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/11/08/converting-a-node-dot-js-express-api-to-typescript/"/>
    <updated>2016-11-08T21:32:05+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/11/08/converting-a-node-dot-js-express-api-to-typescript</id>
    <content type="html"><![CDATA[<p>I started using TypeScript as part of a project I&rsquo;m working on. If you&rsquo;re new to TypeScript or
aren&rsquo;t yet sure about the benefits it can bring to your Javascript codebases, I recommend seeing
<a href="https://channel9.msdn.com/Events/Build/2016/B881">this presentation from Anders Hejlsberg (Build 2016)</a>.</p>

<p>One thing I really like about TypeScript is that it&rsquo;s a superset of Javascript, which means all Javascript
you wrote until now is already valid TypeScript. This makes it possible for anyone to come
into TypeScript and adopt it as much or as little as they want. Anders calls this &ldquo;turning the knob&rdquo;
experience. If you want to go all the way in with the type system, you can do so. Or if you only want to
use it in certain parts of your codebase, you can do that too.</p>

<p>As I learned more about TypeScript, I got convinced that I can benefit from it in most of my Javascript projects,
in particular, the ones that involve rich business domains. As an experiment, I started
converting <a href="https://github.com/hakant/HackathonPlannerAPI">the backend of Hackathon Planner</a>, written in <a href="https://nodejs.org/en/">Node.js</a>
and <a href="http://expressjs.com/">Express</a>, into TypeScript.</p>

<p>All in all, it&rsquo;s been a smooth experience but if
you&rsquo;re a developer yourself, you know that this type of refactorings never happen on a straight line, there
are always bumps and quirks along the way.</p>

<p>Here are a number of things I experienced as I gradually converted all of the codebase from ES6 Javascript
to TypeScript. This repository is open source and on <a href="https://github.com/hakant/HackathonPlannerAPI">GitHub</a>.
TypeScript version of the code might still be on a separate branch if I haven&rsquo;t merged it yet.</p>

<h2>1. At transition, module loading can get tricky in Node.js</h2>

<p>TypeScript shares the <a href="https://www.typescriptlang.org/docs/handbook/modules.html">same concept of a module as ES6</a>.
TypeScript&rsquo;s module import and export syntax is very similar to its ES6 counterpart but the <a href="https://nodejs.org/docs/latest/api/modules.html">CommonJS
module system</a> that Node.js uses is different.</p>

<p>I wanted to slowly port my Javascript to TypeScript so that I can continue making releases in between.
Obviously, this means that part of the code would be transpiled from TypeScript while the other part is
originally Javascript. In many occasions I had to load a module from a .js file and the target
module was transpiled from a .ts (TypeScript) file. <a href="https://github.com/Microsoft/TypeScript/issues/2719">This can cause issues</a>.</p>

<p>Look at the code below and see what happens when &ldquo;ideas.js&rdquo; has to load a module from &ldquo;AdminRepository.ts&rdquo;.
All of a sudden you have to use the &ldquo;default&rdquo; property to be able to access the exported object.
Eventually, when the consumer (idea.js) is also converted to TypeScript, the problem will go away.</p>

<br/>




<script src="https://gist.github.com/hakant/d68576a8d9cc9ed85e8d3c649ad8a856.js"></script>


<h2>2. Adding Type Definition Files to a Project</h2>

<p>Type definition files let you consume third party libraries as if they were written in TypeScript. So
you get all the benefits of type checking, intellisense and all other TypeScript design &amp; compile time
goodness even when the third party library is written in pure Javascript.</p>

<p>Before 2.0 release of TypeScript, finding and using these type definition files could get a bit <a href="https://www.davevoyles.com/2016/02/16/how-to-add-type-definitions-to-a-typescript-project/">painful and
confusing</a> &ndash;
same goes for <a href="https://medium.com/@mweststrate/how-to-create-strongly-typed-npm-modules-1e1bda23a7f4#.7ur75n1hf">creating them</a>.
TypeScript 2.0 fixed some of these issues by introducing a <a href="https://blogs.msdn.microsoft.com/typescript/2016/09/22/announcing-typescript-2-0/#simplified-declaration-file-dts-acquisition">simplified declaration file
acquisition model</a>.</p>

<p>In node.js, in order to grab the underscore.js package, you&rsquo;d use:</p>

<blockquote><p>npm install underscore &mdash;save</p></blockquote>

<p>Now, if you also want to use this package from TypeScript, with strong typing, you&rsquo;ll have to download
the necessary type declaration file as well:</p>

<blockquote><p>npm install @types/underscore &mdash;save</p></blockquote>

<p>Starting with TypeScript 2.0, these type definition files are regular npm packages.</p>

<p>After downloading the type definition file, VS Code stops complaining. Furthermore, I get all type safety
features and intellisense while using this library, which is what I want and why I use TypeScript.</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/types_packages.png" alt="Types Packages" /></p>

<p>On the other hand, sometimes a library you&rsquo;re using might not have a type definition file. For example, I&rsquo;m using
a passport extension library called &ldquo;passport-github2&rdquo; which doesn&rsquo;t have a definition file yet
(and probably never will). Inside any TypeScript file that uses this library, VSCode complains that it doesn&rsquo;t
understand this library. TypeScript compilation also results in the same error. But even though the typing file
is missing, the actual library is there and it works during run-time.</p>

<p>But of course we&rsquo;ve a problem here. The problem is that the TypeScript compiler will complain about this missing type definition file
forever. Being a good developer, what you want to do is to avoid having these kinds of error messages lying around
and being ignored.</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/missing_typing.png" alt="Missing Typings" /></p>

<p>Having said this, it&rsquo;s worth mentioning that
<a href="https://medium.com/@sam.verschueren/the-one-thing-that-keeps-me-from-using-typescript-839e9bd464d7#.fg5tvva5g">people are complaining</a>
about this aggressive behavior of TypeScript, as it eagerly wants all 3rd party packages to have type definition files. But
there&rsquo;s probably <a href="https://github.com/Microsoft/TypeScript/pull/11446">a solution coming</a>.</p>

<p>Until then, there are 2 possible solutions:</p>

<ul>
<li>Set &ldquo;allowJs&rdquo; compiler option to true (in ts.config file). Although I should warn you that this will not only allow
third party packages to be consumed without type definitions, it will also allow any developer to put pure
javascript code into your project.</li>
<li>Another solution is to declare an <a href="https://www.typescriptlang.org/docs/handbook/modules.html#ambient-modules">ambient module</a>
for that library in a separate file &ndash; either marking it with &lsquo;any&rsquo; keyword or with proper types.</li>
</ul>


<p>I chose the latter, because I noticed that &ldquo;allowJs&rdquo; flag has far bigger consequences. It silences a bunch of
other types of errors/warnings which I would like to be informed about. Here is how those ambient modules
look like:</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/ambient_modules.png" alt="Ambient Modules" /></p>

<h2>3. Incorrect / Incomplete Type Definition Files</h2>

<p>Sometimes a type definition file (.d.ts file) turns out to be incorrect or incomplete. The screenshot
below shows a situation where the package &ldquo;aws-sdk&rdquo; has an incomplete type definition. It doesn&rsquo;t
know that &ldquo;endpoint&rdquo; property exists even though it does exist in <a href="http://docs.aws.amazon.com/amazondynamodb/latest/gettingstartedguide/GettingStarted.NodeJs.01.html">AWS documentation</a>.</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/incorrect_d.ts_file.png" alt="Incorrect type declarations" /></p>

<p>I literally went into the type declaration file I downloaded via npm and added the field &ldquo;endpoint&rdquo;
in there to fix the problem. Probably I have to commit this file into source control now. Unfortunately
I couldn&rsquo;t find a best practice that explains how to properly handle these situations. For now, I&rsquo;ll go
with the solution of manually fixing the definition file and adding it into the source control. Below you
can see the patch I made to the declaration file of AWS-SDK (line commented out).</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/clientconfigpartial_d.ts.png" alt="ClientConfigPartial-AWS-SDK" /></p>

<h2>4. Dynamic Augmentation of Javascript Objects</h2>

<p>A very common pattern in javascript is to dynamically extend or augment an object with new or complementary
behavior. Here below, I&rsquo;m using <a href="http://bluebirdjs.com">bluebird.js</a> to convert a callback oriented API
to a Promise based API. All of a sudden though, TypeScript doesn&rsquo;t know about these new &ldquo;async&rdquo; methods that
bluebird has plugged into the dynamodb client.</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/promisify_all.png" alt="Bluebird-Promisify-All" /></p>

<p>The solution is to either declare this object as a new interface or mark it as &ldquo;any&rdquo;,
as suggested <a href="https://github.com/Microsoft/TypeScript/issues/8685">here</a>). I&rsquo;ve chosen the first, a more type-safe
approach, and declared my new type in the &ldquo;aws-sdk&rdquo; type declaration file, which solved the problem in
a nicer way imho. See the DynamoDBAsyncClient interface definition below:</p>

<p><img src="http://www.hakantuncer.com/assets/Node_Express_TypeScript/dynamodb_async_client_declaration.png" alt="DynamoDB_Async_Client_Declaration" /></p>

<h2>5. Using import or export in your TypeScript file turns it into a module</h2>

<p>Both in TypeScript and ES6, any file containing a top-level import or export is considered a module. So
right after you use one of these keywords in your Javascript or TypeScript file, it will start behaving like
a module. I stumbled upon this while I was trying to implement an interface that I had created in a separate
file.</p>

<p>Let&rsquo;s first look at a simple case that doesn&rsquo;t make use of modules. Here below there&rsquo;s an interface and its
implementation right below it. See how AdminRepository.ts refers to IAdminRepository interface without
any ceremony.</p>

<br/>




<script src="https://gist.github.com/hakant/ce9a6521a16d871bb652c2f41299312d.js"></script>




<script src="https://gist.github.com/hakant/7c25b55660deffb5556df2357ab5708b.js"></script>


<p>Now look at these other two files, in which the interface exposes a third party object and therefore has to
import that third party module. Note that index.ts can&rsquo;t just refer to that interface anymore, without
actually importing it.</p>

<br/>




<script src="https://gist.github.com/hakant/126bbcdaa477680e4ace2021f9dedd3e.js"></script>




<script src="https://gist.github.com/hakant/88d0907ab7f3c090b4d4404a31c079c5.js"></script>


<p>By the way, I also noticed that <a href="https://github.com/Microsoft/TypeScript/wiki/Coding-guidelines">TypeScript coding guidelines</a>
do not recommend using &ldquo;I&rdquo; as a prefix for interface names. So I need to hold my C# reflexes.</p>

<p>There are more than a few things that one has to do in order to make the TypeScript compiler happy. For anyone
with a &ldquo;Javascript mindset&rdquo; this may feel like unnecessary burden. But once you make this investment,
the amount of help and insight you get from the TypeScript compiler and tooling around it is amazing.</p>

<p>Thanks for reading.</p>

<p>~ Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Creating an online quiz game using Node.js, Hyperdev, PlayStation Buzz controllers, Raspberry PI and Nfield]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/09/07/creating-an-online-quiz-game-using-node-dot-js/"/>
    <updated>2016-09-07T20:58:34+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/09/07/creating-an-online-quiz-game-using-node-dot-js</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been writing about hackathons and the planner application I&rsquo;ve been busy
with for a while now. The news is that <a href="https://github.com/hakant/HackathonPlanner">Hackathon Planner</a> is live
and used during the last hackathon event on 25 August 2016 at <a href="http://niposoftware.com/">NIPO Software</a>.
36 hackathon ideas were created, voted and team compositions were made using the software. You can
<a href="http://www.hakantuncer.com/assets/Online_Quiz_Game/HackathonPlanner_Final.gif" target="_blank">see it in action here</a>.</p>

<p>This post however, is about something else. It&rsquo;s about a crazy idea of my colleague Rutger de Jong and how we
brought it to life during that last hackathon day: Converting <a href="https://www.niposoftware.com/Products/Nfield">Nfield</a> into an online quiz game that
can be controlled by PlayStation Buzz controllers.</p>

<p><img src="http://www.hakantuncer.com/assets/Online_Quiz_Game/PlayStationBuzz.jpg" alt="Quiz Game with Play Station Buzz" /></p>

<h2>The Team</h2>

<p>Rutger brought together five talented people from NIPO Software with diverse skills. Then he was scratching
his head (on the left) thinking &ldquo;what have I done&hellip;&rdquo; : )</p>

<p><img src="http://www.hakantuncer.com/assets/Online_Quiz_Game/team.jpg" alt="NIPO Software Hackathon - Team" /></p>

<h2>The Architecture</h2>

<p><img src="http://www.hakantuncer.com/assets/Online_Quiz_Game/Architecture-Diagram.png" alt="Quiz Game - Architecture Diagram" /></p>

<h2>How it works</h2>

<br/>


<ul>
<li>A shared screen with a browser is opened and an online interview is started by visiting a specific URL to Nfield.
This online interview is running our little quiz.</li>
<li>Each player grabs one of the PlayStation Buzz controllers that are connected to a computer runing
a node.js application to interpret inputs coming from the controllers.</li>
<li>The online interview that was started in the browser is actually a quiz with a special template (CSS &amp; Javascript).</li>
<li>A random sequence of questions start appearing on the screen, each for 10 seconds.</li>
<li>Players give their answers to each question simultaneously. These answers are received by a node.js application
listening inputs from Buzz controllers and pushes events to the app running on Hyperdev.</li>
<li>Application running on Hyperdev acts as a message hub and broadcaster. It relays the incoming messages to the quiz
running on Nfield and also to the Raspberry PI.</li>
<li>The quiz, running on the browser, receives these message (via our customized template) and picks the corresponding
answers selected by players.</li>
<li>As time is ticking away for each question, the customized template that&rsquo;s running the quiz emits events to the
Raspberry PI, telling it to buzz and blink harder.</li>
<li>Scores are continuously calculated as quiz progresses and in the end the winner is announced.</li>
</ul>


<h2>The code</h2>

<p>You can find all the code that powers this project in the following repository on GitHub:
<a href="https://github.com/hakant/NfieldQuizGame">https://github.com/hakant/NfieldQuizGame</a></p>

<h2>Fun at the demo</h2>

<p>The most obvious (and fun!) demo for a quiz game is to find a number of volunteers from the audience and run a contest!
So that&rsquo;s what we did : )</p>

<p><img src="http://www.hakantuncer.com/assets/Online_Quiz_Game/demo.jpg" alt="Hackathon - Demo" /></p>

<p>&hellip; and here is a screenshot from the quiz:</p>

<p><img src="http://www.hakantuncer.com/assets/Online_Quiz_Game/Quiz-Screenshot.png" alt="Hackathon - Nfield Quiz - Screenshot" /></p>

<p>All in all, once again, it was a great event at the NIPO Software office in Amsterdam. Who knows.. maybe in the very near future,
this little fun project can be put into actual use during various market research events. Without a doubt, it showcases the
power of Nfield and how customizable it is for variety of scenarios.</p>

<p>If you want to know more about each component and what it specifically does, read on.</p>

<h2>System Components</h2>

<br/>


<h4>Hyperdev.com / node.js</h4>

<p><a href="https://hyperdev.com">Hyperdev</a> is a prototyping environment where you can start up and develop a simple node.js application
right within the browser and see your application up and running live in a matter of seconds. Every time you save a file
in your project, hyperdev deploys it automatically in an amazing speed. It uses docker containers and AWS behind the scenes.
It also supports https out of the box, which was important for our purposes (Nfield services run on https so should any
integration or extension with it).</p>

<p>This node.js app running on hyperdev is our orchestrator. It is basically responsible with broadcasting incoming websocket
messages to all subscribers. Each piece of the puzzle (buzz controllers, raspberry pi and nfield) talk to this node app on
hyperdev instead of directly talking to each other, which btw would complicate things as each application would then have to
discover where the others are and be able to connect to them somehow.</p>

<p>In the architecture above, as long as everyone can reach hyperdev, successful communication is guaranteed.</p>

<br/>


<h4>Mac with Buzz Controllers / node.js</h4>

<p>While PlayStation buzz controllers are perfect for a quiz game, the immediate question for our little hackathon
project was; how do we connect to and control these things?</p>

<p><a href="https://www.youtube.com/watch?v=Qkkmz5VZoMQ">Node.js is everywhere</a>, it really is. There is a node package called
<a href="https://github.com/node-hid/node-hid">node-hid</a> which allows you to access USB Human Interface Devices (HID) from
node.js. It basically allows you to read from and write to these devices by using node buffers. We could even connect
these buzzers to Raspberry PI but we ran into a few security issues and pivoted to using a mac instead.</p>

<p>Of course, just being able to read the controller&rsquo;s input buffer doesn&rsquo;t automatically mean you know how to interpret it.
It speaks a certain protocol which you have to understand. While scratching our heads, we found this article:
<a href="http://www.developerfusion.com/article/84338/making-usb-c-friendly/">Working with USB devices in .NET and C#</a> where
the author describes the protocol clearly, well somewhat clearly:</p>

<p><img src="http://www.hakantuncer.com/assets/Online_Quiz_Game/buzz-protocol.jpg" alt="PlayStation Buzz - Protocol" /></p>

<p>Long story short, each controller has a reserved space on a 6 byte area, inside which they flip bits on and off based
on the state of their buttons.</p>

<p>Here is a section of the node.js code running on the Mac that reads inputs from buzz controllers:</p>

<br/>


<script src="https://gist.github.com/hakant/7ee37ee00fccfbf487d2c6d3328f13dd.js"></script>




<br/>


<h4>Raspberry PI / node.js</h4>

<p>Since we couldn&rsquo;t succeed in reading inputs from PlayStation Buzz controllers on our Raspberry PI, we had to come up with another very useful
role for it &ndash; because we simply can&rsquo;t imagine a hackathon project without the PI (!).</p>

<p>One of our teammates said &ldquo;let&rsquo;s use it to signal remaining time at each question &ndash; with some touch of tension&rdquo;.
Then we went ahead and placed a bunch of lights on the PI and a loud buzzer. Using node.js and socket.io, it was
listening to certain type of events to start buzzing with low and high frequencies. As contestants were running out of
time while answering each question, the frequency of buzz and light effects were increasing.</p>

<br/>


<h4>Nfield Online Interviewing System / .NET, Azure</h4>

<p>Nfield Online is a data collection platform powered by NIPO Software. A SaaS platform where market research companies
can create surveys and reach their respondents. Nfield Online is bundled with a powerful domain specific
language, ODIN, created for scripting simple or complex questionnaires. Nfield also has a powerful templating system
where customers can create and run their own templates in their surveys (both for changing the look &amp; feel and behavior of
their questionnaires).</p>

<p>We used this templating system (HTML, CSS and Javascript) to tap into a running interview (in this case, our quiz) and
control it via PlayStation Buzz controllers over the internet. We also used it to send messages to the Raspberry PI
to indicate remaining time per question.</p>

<p>When this template is activated on the interview, which is running our quiz, it connects to the socket.io server
on hyperdev and starts listening to &ldquo;button pressed&rdquo; events from PlayStation Buzz controllers. When a button
is pressed it receives the event and selects the corresponding answer on the quiz for that contestant.</p>

<p>I had a lot of fun working on this project and also writing about it in this blog. Every
technology company should make hackathons a part of their culture. The benefits might not be immediately clear
in the beginning but all those doubts disappear after a few events.</p>

<br/>


<p>Thank you for reading.</p>

<p>~ Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[After NDC Oslo 2016]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/06/13/after-ndc-oslo-2016/"/>
    <updated>2016-06-13T21:41:44+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/06/13/after-ndc-oslo-2016</id>
    <content type="html"><![CDATA[<p>In my <a href="http://www.hakantuncer.com/blog/2016/06/01/ndc-oslo-2016/">previous post</a> I&rsquo;d talked about my plans in NDC Oslo, including<br/>
all the sessions and the 2-day workshop I was planning to attend.</p>

<p>It&rsquo;s been a great experience. I came back with good memories and learned a few things too. NDC conferences usually
feature high quality content and good speakers, this one also lived up to the expectations.</p>

<p>I would like to share some of the highlights of the conference which, of course, are based on my perspective
and interests.</p>

<h2>Workshop: &ldquo;Microservice development&rdquo;</h2>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/Microservices-Development-Workshop-1.jpg" alt="Microservices Development Workshop" /></p>

<p><a href="https://twitter.com/jbogard">Jimmy Bogard</a> and two employees from <a href="http://particular.net/nservicebus">Particular Software</a> ran the workshop. As it happens with all these type
of workshops, nearly half of the content was sort of a beginner to intermediate level while the other half was
covering more advanced and interesting scenarios. Here are some of my highlights:</p>

<ul>
<li><p>Services are automonous. They don&rsquo;t rely on other services to do their work. They also own their own
SLA &amp; uptime. They should have explicit boundaries and own their own data.</p></li>
<li><p>Isolation of services enable the use of different languages and frameworks per service. However, rather than using the
freedom of choosing a different language, it is more useful to have services choose their own data store. Homogenity
on the application side and heterogenity on the data side is more encouraged.</p></li>
<li><p>Creating service boundaries for actually solving business problems is a good idea. Take a good look at the
business domain and how it&rsquo;s compartmentalized within your company. Model your services around that structure. A
straightforward example of this is to create a service per business department or independent business unit.</p></li>
<li><p>We talked about messaging patterns. A lot of boilerplate code around messaging is handled for you by a product
called <a href="http://particular.net/nservicebus">NServiceBus (from Particular Software)</a>.</p>

<ul>
<li>Using commands only within a service boundary.</li>
<li>Using events within and across service boundaries.</li>
<li>Once you separate your service into a number of granular command and event handlers, try to be as &ldquo;dumb&rdquo; as
possible inside each of these handlers &ndash; avoid using complex patterns and abstractions as much as possible
(this at least is what Jimmy is advising).</li>
</ul>
</li>
<li><p>When building an SOA (service oriented architecture), the rule of thumb is that the first line public
service can call multiple downstream services to aggregate data but those services should never call other services.
Thus, the depth of services that are called are never more than one. This principle will help you avoid
complexity and possible high latency.</p></li>
<li><p>For this reason above (downstream services don&rsquo;t call other services) an example in the workshop used a
technique where a service codebase contains public interfaces which can be implemented by other services and shared
during development time (as nuget packages). <a href="https://github.com/Particular/Workshop/tree/master/exercises/src/04%20Integration/after/Divergent.ITOps.Interfaces">Check this code</a>
for an example of this use case.</p>

<ul>
<li>As an example, if sales domain needs to get something from customer domain, sales service
declares an interface and customer service supplies the implementation to that service.</li>
<li>This means that one service doesn&rsquo;t call the other one at runtime but instead runs that piece of code directly.</li>
<li>Note that this removes the runtime dependency but introduces development time dependency. If you&rsquo;re doing
microservices mostly for reasons around team composition and independence, this might sound less attractive to
you.</li>
</ul>
</li>
<li><p>You can find all workshop exercises <a href="https://github.com/Particular/Workshop">here on GitHub</a>.</p></li>
</ul>


<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/Microservices-Development-Workshop-2.jpg" alt="Microservices Development Workshop" /></p>

<h2>Conference Highlights</h2>

<br/>


<h3>Erlang is cool, so is functional programming!</h3>

<p>Functional programming was a large and popular track in NDC Oslo. Created a lot of buzz for sure. This photo
below was taken at the end of conference day 1. I believe at the end of the conference <em>#fsharp</em>, <em>#erlang</em>, <em>#phoenix</em>
and <em>#elixir</em> were all sitting high in this top 10 list as some of the most spoken technologies.</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/NDC-Oslo-Twitter-Buzz.png" alt="NDC Oslo Twitter Buzz" /></p>

<p>I met <a href="https://en.wikipedia.org/wiki/Erlang_(programming_language)" target="_blank">Erlang</a> for the first time and found it
quite interesting. In Wikipedia, Erlang is described as:</p>

<blockquote><p>Erlang is a general-purpose, concurrent, functional programming language. It is also a garbage-collected runtime system.
Erlang is known for its designs that are well suited for systems with the following characteristics:</p>

<ul>
<li>Distributed</li>
<li>Fault-tolerant</li>
<li>Soft real-time</li>
<li>Highly available, non-stop applications</li>
<li>Hot swapping, where code can be changed without stopping a system.</li>
</ul>
</blockquote>

<p>Do any of these sound familiar? Welcome to the cutting edge stateful microservices technology, from 1986!</p>

<p>Lightweight processes are the main building blocks of an Erlang application:</p>

<blockquote><p>Processes are the primary means to structure an Erlang application. They are neither operating system processes
nor operating system threads, but lightweight processes that are scheduled by Erlang&rsquo;s BEAM VM.</p></blockquote>

<p>Based on my first impressions I found many conceptual similarities between Erlang and <a href="https://azure.microsoft.com/en-us/services/service-fabric/">Service Fabric</a>: the idea of
stateful and stateless services messaging each other. Erlang doesn&rsquo;t have the concept of replicas (unlike Service Fabric),
all process nodes are peers &ndash; no primary &amp; secondary relationship. Which means if a process crashes the state is
gone. Of course there are solutions to this &ndash; like <a href="https://en.wikipedia.org/wiki/Mnesia">Mnesia</a>.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">My gut feeling after learning more about <a href="https://twitter.com/hashtag/erlang?src=hash">#erlang</a> in <a href="https://twitter.com/hashtag/ndcoslo?src=hash">#ndcoslo</a> : <a href="https://twitter.com/hashtag/servicefabric?src=hash">#servicefabric</a> is <a href="https://twitter.com/hashtag/erlang?src=hash">#erlang</a> plus some (large) churn.I still love <a href="https://twitter.com/hashtag/csharp?src=hash">#csharp</a> though</p>&mdash; Hakan Tuncer (@hakant) <a href="https://twitter.com/hakant/status/741296386856095744">June 10, 2016</a></blockquote>


<script async src="http://www.hakantuncer.com//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>I think I&rsquo;ll be looking into Erlang, <a href="http://www.phoenixframework.org/">Phoenix</a> and
<a href="http://elixir-lang.org/">Elixir</a> because I&rsquo;m sold to the idea that these things are pretty powerful to ignore.</p>

<br/>


<h3>Head to head session with questions from Stack Overflow</h3>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/head-to-head.jpg" alt="Head to head with Scott and Jimmy" /></p>

<p>Both <a href="https://twitter.com/odetocode">Scott Allen</a> and <a href="https://twitter.com/jbogard">Jimmy Bogard</a> are proponents of testing with less mocking. Jimmy said he doesn&rsquo;t like
using in memory database tricks or any other unrealistic testing styles. A few tricks that he spoke of were:</p>

<ul>
<li>Using database transactions without commiting in the end &ndash; to get back to a reset state after each test.</li>
<li>Using a nuget package called <a href="https://github.com/jbogard/Respawn">Respawn</a> that can cleanup the
database after each test in a clever way.</li>
<li>Using real storage during tests has been beneficial to these guys according to them (less unforeseen bugs).</li>
</ul>


<br/>


<h3>.NET Core is shaping up nicely</h3>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/dot-net-core.jpg" alt=".NET Core - Mark Rendle" /></p>

<p>ASP.NET Core looks beautiful even though the roadmap had its fair share of ups and downs for a long period. The
talk about making the Kestrel web server performant is fantastic. It turns out that creating a very performant web
server takes ridiculous amount of code optimizations. Must watch. Actually most .NET Core talks were very
interesting.</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/kestrel-web-server.jpg" alt="Kestrel Web Server" /></p>

<br/>


<h3>My picks</h3>

<ul>
<li><a href="http://ndcoslo.com/talk/asp.net-core-1.0-deep-dive/">Talk: ASP.NET Core 1.0 Deep Dive</a></li>
<li><a href="http://ndcoslo.com/talk/intro-to-azure-machine-learning-predict-who-survives-the-titanic/">Talk: Intro to Azure Machine Learning: Predict Who Survives the Titanic</a></li>
<li><a href="http://ndcoslo.com/talk/asp.net-core-kestrel-adventures-in-building-a-fast-web-server/">Talk: ASP.NET Core Kestrel: Adventures in building a fast web server</a></li>
<li><a href="http://ndcoslo.com/talk/play-by-play/">Talk: Head to Head #2: K. Scott Allen and Jimmy Bogard</a></li>
<li><a href="http://ndcoslo.com/talk/net-without-windows/">Talk: .NET without Windows</a></li>
<li><a href="http://ndcoslo.com/talk/is-your-code-ready-for-net-core/">Talk: Is your code ready for .NET Core?</a></li>
<li><a href="http://ndcoslo.com/talk/escaping-the-big-ball-of-mud/">Talk: Escaping the Big Ball of Mud</a></li>
<li><a href="http://ndcoslo.com/talk/sequential-concurrent-and-parallel-programming/">Talk: Sequential, Concurrent and Parallel Programming</a></li>
<li><a href="http://ndcoslo.com/talk/c-today-and-tomorrow/">Talk: C# Today and Tomorrow</a></li>
<li><a href="http://ndcoslo.com/talk/elixir-is-neat-but-what-can-you-actually-do-with-it/">Talk: Elixir Is Neat But What Can You Actually Do With It?</a></li>
</ul>


<h2>Few more photos and resources</h2>

<p>Free ebook, if you&rsquo;re interested.</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/free-ebook.jpg" alt="Distributed computing" /></p>

<br/>


<hr />

<p>Nice resources from the talk &ldquo;Escaping the Big Ball of Mud&rdquo;:</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/escaping-big-ball-of-mud.jpg" alt="Escaping the big ball of mud" /></p>

<br/>


<hr />

<p>FAQ slide from the talk &ldquo;Scale up and out with Akka.NET&rdquo;:</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/akka-dot-net.jpg" alt="Akka.NET" /></p>

<br/>


<hr />

<p>This BB-8 droid from Star Wars could be controlled via a tablet. I tried and miserably failed
against the challenging track.</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/star-wars.jpg" alt="Star Wars" /></p>

<br/>


<hr />

<p>My frequent stop. These guys were serving top class coffee:</p>

<p><img src="http://www.hakantuncer.com/assets/After_NDCOslo2016/oslo-coffee-love.jpg" alt="Oslo loves coffee" /></p>

<p>That&rsquo;s all I&rsquo;ve got for now. Thanks for reading.</p>

<p>~Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NDC Oslo 2016]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/06/01/ndc-oslo-2016/"/>
    <updated>2016-06-01T20:16:43+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/06/01/ndc-oslo-2016</id>
    <content type="html"><![CDATA[<p>It&rsquo;s time for NDC Oslo again &ndash; happening between 6-10 June 2016. I&rsquo;m excited to be going there once again
this year.</p>

<p>First two days I&rsquo;ll be taking a workshop on the topic of <a href="http://ndcoslo.com/workshop/microservice-development-with-examples-in-nservicebus/">microservice development (with examples in NServiceBus)</a>.
Originally the speaker was <a href="https://twitter.com/UdiDahan">Udi Dahan</a> but today I saw that for
personal reasons Udi is not going to make it to the conference anymore. Instead, now <a href="https://twitter.com/jbogard">Jimmy Bogard</a>
is going to give the workshop and I&rsquo;m still up for it! I&rsquo;m hoping to learn more than a few good practices and ideas
around building maintainable and resilient service oriented architectures.</p>

<p>After the workshop 3 day long conference goodness starts. I&rsquo;ve been looking at the agenda for a while and marking
the sessions that I&rsquo;m interested in. I&rsquo;ve put my list below. My plan is to attend the first session
in each slot and see if I can watch the rest via recordings after the conference.</p>

<p>And if you&rsquo;re going to be at NDC Oslo next week and don&rsquo;t mind talking to strangers <a href="https://twitter.com/hakant">send me a tweet</a>!
Always nice to have a few drinks and meet new folks.</p>

<h2>Wednesday</h2>

<br/>


<ul>
<li><p>Keynote</p>

<ul>
<li><a href="http://ndcoslo.com/talk/keynote/">Talk: Keynote: Yesterday’s Technology is Dead, Today’s is on Life Support</a></li>
</ul>
</li>
<li><p>10:20 &ndash; 11:20</p>

<ul>
<li><a href="http://ndcoslo.com/talk/dragons_in_new_javascript/">Talk: There Still Be Dragons in the New JavaScript</a></li>
<li><a href="http://ndcoslo.com/talk/asp.net-core-1.0-deep-dive/">Talk: ASP.NET Core 1.0 Deep Dive</a></li>
</ul>
</li>
<li><p>11:40 &ndash; 12:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/cross-platform-desktop-apps-with-electron/">Talk: Cross-Platform Desktop Apps with Electron</a></li>
<li><a href="http://ndcoslo.com/talk/intro-to-azure-machine-learning-predict-who-survives-the-titanic/">Talk: Intro to Azure Machine Learning: Predict Who Survives the Titanic</a></li>
</ul>
</li>
<li><p>13:40-14:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/my-favorite-azure-security-features-and-why-you-should-care/">Talk: My Favorite Azure Security Features &ndash; and why you should care</a></li>
<li><a href="http://ndcoslo.com/talk/elastic-scaling-in-a-microservice-oriented-architecture/">Talk: Elastic scaling in a (micro)service oriented architecture</a></li>
<li><a href="http://ndcoslo.com/talk/the-sane-way-to-build-cloud-infrastructure/">Talk: The sane way to build cloud infrastructure</a></li>
</ul>
</li>
<li><p>15:00 &ndash; 16:00</p>

<ul>
<li><a href="http://ndcoslo.com/talk/scale-up-and-out-with-akka-net/">Talk: Scale up and out with Akka.NET</a></li>
<li><a href="http://ndcoslo.com/talk/universal-web-with-npm-react-and-redux-using-webpack/">Talk: Universal web with npm, React and Redux using WebPack</a></li>
</ul>
</li>
<li><p>16:20 &ndash; 17:20 (Holy cow! What a time slot&hellip;)</p>

<ul>
<li><a href="http://ndcoslo.com/talk/domain-driven-design-the-good-parts/">Talk: Domain-Driven Design: The Good Parts</a></li>
<li><a href="http://ndcoslo.com/talk/asp.net-core-kestrel-adventures-in-building-a-fast-web-server/">Talk: ASP.NET Core Kestrel: Adventures in building a fast web server</a></li>
<li><a href="http://ndcoslo.com/talk/data-modeling-with-document-stores/">Talk: Data Modeling with Document Stores</a></li>
<li><a href="http://ndcoslo.com/talk/containers-as-a-service-comparing-ecs-gks-acs-and-others/">Talk: Containers As A Service &ndash; Comparing ECS, GKS, ACS and others</a></li>
<li><a href="http://ndcoslo.com/talk/an-experience-report-from-building-a-large-react-js-redux-application/">Talk: An Experience Report from Building a Large React.js/Redux Application</a></li>
</ul>
</li>
<li><p>17:40 &ndash; 18:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/a-high-performance-solution-to-microservices-ui-composition/">Talk: A High-Performance Solution to Microservices UI Composition</a></li>
<li><a href="http://ndcoslo.com/talk/http-2-0-from-the-developers-viewpoint/">Talk: HTTP 2.0 from the Developer&rsquo;s Viewpoint</a></li>
<li><a href="http://ndcoslo.com/talk/performance-optimizations-in-the-wild/">Talk: Performance Optimizations in the Wild</a></li>
</ul>
</li>
</ul>


<h2>Thursday</h2>

<br/>


<ul>
<li><p>09:00 &ndash; 10:00</p>

<ul>
<li><a href="http://ndcoslo.com/talk/net-without-windows/">Talk: .NET without Windows</a></li>
<li><a href="http://ndcoslo.com/talk/net-data-security-hope-is-not-a-strategy/">Talk: .NET Data Security : Hope is not a Strategy</a></li>
<li><a href="http://ndcoslo.com/talk/working-distributed-how-does-it-even-work/">Talk: Working Distributed &ndash; How Does It Even Work?</a></li>
</ul>
</li>
<li><p>10:20 &ndash; 11:20</p>

<ul>
<li><a href="http://ndcoslo.com/talk/is-your-code-ready-for-net-core/">Talk: Is your code ready for .NET Core?</a></li>
<li><a href="http://ndcoslo.com/talk/stairway-to-cloud-orleans-framework-for-building-halo-scale-systems/">Talk: Stairway to Cloud: Orleans Framework for building Halo-scale systems</a></li>
<li><a href="http://ndcoslo.com/talk/sensitive-data-in-the-cloud-you-cant-do-that/">Talk: Sensitive data in the cloud? You can’t do that!</a></li>
<li><a href="http://ndcoslo.com/talk/performance-is-not-an-option-building-services-with-grpc-and-cassandra/">Talk: Performance is not an Option- Building services with GRPC and Cassandra</a></li>
</ul>
</li>
<li><p>11:40 &ndash; 12:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/servicefabric-a-whole-lot-of-microservice-awesome/">Talk: ServiceFabric &ndash; a whole lot of microservice awesome!</a></li>
<li><a href="http://ndcoslo.com/talk/micromonolith-top-anti-patterns-of-distributed-systems/">Talk: × MicroMonolith &ndash; Top anti-patterns of distributed systems</a></li>
<li><a href="http://ndcoslo.com/talk/hacking-in-2016-how-is-our-systems-broken/">Talk: Hacking in 2016 &ndash; How is our systems broken?</a></li>
<li><a href="http://ndcoslo.com/talk/optimizing-the-programmer-get-more-done-faster/">Talk: Optimizing the Programmer: Get More Done Faster</a></li>
</ul>
</li>
<li><p>13:40 &ndash; 14:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/escaping-the-big-ball-of-mud/">Talk: Escaping the Big Ball of Mud</a></li>
<li><a href="http://ndcoslo.com/talk/deploying-straight-to-production-a-guide-to-the-holy-grail/">Talk: Deploying Straight to Production: A guide to the Holy Grail</a></li>
<li><a href="http://ndcoslo.com/talk/building-an-app-in-asp-net-core-and-mvc-6-for-the-raspberry-pi/">Talk: Building an app in ASP.NET Core and MVC 6 for the Raspberry Pi</a></li>
<li><a href="http://ndcoslo.com/talk/dont-be-dilbert-survival-tactics-for-uninspiring-workplaces/">Talk: Don’t Be Dilbert: Survival Tactics for Uninspiring Workplaces</a></li>
</ul>
</li>
<li><p>15:00 &ndash; 16:00</p>

<ul>
<li><a href="http://ndcoslo.com/talk/deploying-docker-containers-on-windows-server-2016/">Talk: Deploying Docker Containers on Windows Server 2016</a></li>
<li><a href="http://ndcoslo.com/talk/sequential-concurrent-and-parallel-programming/">Talk: Sequential, Concurrent and Parallel Programming</a></li>
<li><a href="http://ndcoslo.com/talk/web-application-security-lessons-learned/">Talk: Web Application Security: Lessons Learned</a></li>
</ul>
</li>
<li><p>16:20 &ndash; 17:20</p>

<ul>
<li><a href="http://ndcoslo.com/talk/website-fuzziness/">Talk: Website Fuzziness</a></li>
<li><a href="http://ndcoslo.com/talk/deploying-kubernetes-a-container-cluster-manager/">Talk: Deploying Kubernetes, a Container Cluster Manager</a></li>
</ul>
</li>
<li><p>17:40 &ndash; 18:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/safe-at-any-speed/">Talk: Safe At Any Speed</a></li>
<li><a href="http://ndcoslo.com/talk/lessons-from-a-quarter-of-a-billion-breached-records/">Talk: Lessons from a quarter of a billion breached records</a></li>
<li><a href="http://ndcoslo.com/talk/debugging-your-communication-for-more-success-and-efficiency-in-devops/">Talk: Debugging your communication for more success and efficiency in DevOps</a></li>
<li><a href="http://ndcoslo.com/talk/logging-makes-perfect-real-world-monitoring-and-visualizations-with-riemann-and-friends/">Talk: Logging makes perfect &ndash; real-world monitoring and visualizations with Riemann and friends</a></li>
</ul>
</li>
</ul>


<h2>Friday</h2>

<br/>


<ul>
<li><p>09:00 &ndash; 10:00</p>

<ul>
<li><a href="http://ndcoslo.com/talk/load-testing-at-scale-with-azure/">Talk: Load Testing at Scale with Azure</a></li>
<li><a href="http://ndcoslo.com/talk/c-today-and-tomorrow/">Talk: C# Today and Tomorrow</a></li>
<li><a href="http://ndcoslo.com/talk/analysing-big-time-series-data-in-the-cloud/">Talk: Analysing Big Time-series Data in the Cloud</a></li>
<li><a href="http://ndcoslo.com/talk/web-performance-2016-myths-and-truths/">Talk: Web Performance 2016: Myths and Truths</a></li>
</ul>
</li>
<li><p>10:20 &ndash; 11:20</p>

<ul>
<li><a href="http://ndcoslo.com/talk/sherlock-homepage-a-detective-story-about-running-large-web-services/">Talk: Sherlock Homepage &ndash; A detective story about running large web services</a></li>
<li><a href="http://ndcoslo.com/talk/phoenix_channels/">Talk: Phoenix Channels &ndash; a Distributed PubSub and Presence Platform</a></li>
<li><a href="http://ndcoslo.com/talk/panel-launching-a-software-business/">Talk: Panel: Launching a Software Business</a></li>
</ul>
</li>
<li><p>11:40 &ndash; 12:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/go-one-language-you-should-try/">Talk: Go &ndash; one language you should try</a></li>
<li><a href="http://ndcoslo.com/talk/lightning-talks-2/">Talk: Lightning Talks</a></li>
<li><a href="http://ndcoslo.com/talk/getting-into-the-zero-downtime-deployment-world/">Talk: Getting Into the Zero Downtime Deployment World</a></li>
<li><a href="http://ndcoslo.com/talk/dns-for-developers/">Talk: DNS for Developers</a></li>
</ul>
</li>
<li><p>13:40 &ndash; 14:40</p>

<ul>
<li><a href="http://ndcoslo.com/talk/you-dont-know-node-js/">Talk: &ldquo;You Don&rsquo;t Know Node.js&rdquo;</a></li>
<li><a href="http://ndcoslo.com/talk/building-living-systems-with-hypermedia-actors/">Talk: Building living systems with hypermedia actors</a></li>
<li><a href="http://ndcoslo.com/talk/write-once-run-everywhere-is-not-a-myth/">Talk: &ldquo;Write once, run everywhere&rdquo; is not a myth</a></li>
</ul>
</li>
<li><p>15:00 &ndash; 16:00</p>

<ul>
<li><a href="http://ndcoslo.com/talk/choosing-a-javascript-framework/">Talk: Choosing a JavaScript Framework</a></li>
<li><a href="http://ndcoslo.com/talk/upgrading-javascript-to-es6-and-using-typescript-as-a-shortcut/">Talk: Upgrading JavaScript to ES6 and using TypeScript as a shortcut</a></li>
<li><a href="http://ndcoslo.com/talk/power-to-the-people/">Talk: Power to the people!</a></li>
<li><a href="http://ndcoslo.com/talk/amdahl-to-zipf-the-physics-of-software/">Talk: Amdahl to Zipf: The Physics of Software</a></li>
<li><a href="http://ndcoslo.com/talk/elixir-is-neat-but-what-can-you-actually-do-with-it/">Talk: Elixir Is Neat But What Can You Actually Do With It?</a></li>
</ul>
</li>
<li><p>16:20 &ndash; 17:20</p>

<ul>
<li><a href="http://ndcoslo.com/talk/software-testing-for-failed-projects/">Talk: Software Testing for Failed Projects</a></li>
<li><a href="http://ndcoslo.com/talk/continuous-integration-for-open-source-projects-with-travis-ci/">Talk: Continuous Integration for Open Source Projects with Travis CI</a></li>
<li><a href="http://ndcoslo.com/talk/everything-i-know-about-computers-i-learned-from-the-movies-reloaded/">Talk: Everything I know about computers, I learned from the movies: Reloaded</a></li>
</ul>
</li>
</ul>


<p>~ Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implementing an App Walkthrough]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/04/20/implementing-an-app-walkthrough/"/>
    <updated>2016-04-20T22:23:47+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/04/20/implementing-an-app-walkthrough</id>
    <content type="html"><![CDATA[<p>I think most professionals who design product interfaces (both physical or software interfaces) will agree
that simplicity and discoverability of an interface is a big winning factor. Simple and discoverable
interfaces are usually self explanatory and for this very reason they tend to provide great user
experiences.</p>

<p>On the other hand, this doesn&rsquo;t mean we should stop providing documentation or user manuals for our
products. A discoverable user interface with a clean, easily accessible documentation is I think what
every product deserves.</p>

<p>When it comes to user manuals or guides, I&rsquo;m so much in favor of a user manual that&rsquo;s deeply connected or
embedded to the user interface rather than a pile of content parked somewhere completely disconnected from
the actual product.</p>

<p>UI embedded manuals can be designed in many ways, one of which is through a concept called &ldquo;App Walkthrough&rdquo;.</p>

<h2>App Walkthrough</h2>

<p>From a conceptual point of view I knew what an app walkthrough is for a very long time but before I sat down
to write this post I was tempted to call it &ldquo;in-app tutorials&rdquo;. After some searching around the topic, I
discovered that it actually has a <a href="http://www.dtelepathy.com/blog/design/ux-flows-how-when-to-design-app-walkthrough">common name</a>.</p>

<blockquote><p>A walkthrough is the process of intentionally revealing functionality to a user.</p></blockquote>

<p>Implementing a successful app walkthrough is <a href="https://www.nngroup.com/articles/mobile-instructional-overlay/">not an easy endeavour at all</a>.
It&rsquo;s like a double edged sword. If you <a href="http://www.webdesignerdepot.com/2014/07/how-to-design-a-successful-web-app-walkthrough/">get it right</a>
it&rsquo;s all unicorns and butterflies. If you get it wrong you can do more harm than good.</p>

<h2>Implementing one for Hackathon Planner</h2>

<p>A couple of days ago I started flirting with the idea of implementing a walkthough for the <a href="https://github.com/hakant/HackathonPlanner">Hackathon
Planner</a>. This is what came out:</p>

<p><img src="http://www.hakantuncer.com/assets/App_Walkthrough/Hackathon-Planner-Walkthrough.gif" alt="Hackathon Planner Walkthrough" /></p>

<p>You can try it by visiting the <a href="http://hackathonplanner.s3-website.eu-central-1.amazonaws.com/">Hackathon Planner preview website</a>.
It is designed to be viewed only once and then gets out of the way forever. There are two things that I still
want to add to this:</p>

<ul>
<li>A quick opt out button on each individual step of the walkthough so that users have an easy way to exit
the tutorial without being forced to complete it.</li>
</ul>


<blockquote><p><strong>Update:</strong> Right after I wrote this blog post, I came across a tutorial that&rsquo;s built into GitHub Desktop (for
Mac). See the screenshot below. Clicking &ldquo;Got it!&rdquo; takes the user to the next step of the tutorial while
clicking the close button on the top left corner stops the tutorial. It&rsquo;s brilliant.
<br/><br/>
<img src="http://www.hakantuncer.com/assets/App_Walkthrough/GitHub_Desktop_Walkthrough.png" alt="GitHub Desktop Walkthrough" /></p></blockquote>

<ul>
<li>An overlay that makes the UI frozen while the tooltips are running. If a user doesn&rsquo;t follow the
tooltip popovers and starts clicking around, things get messy (and this is bound to happen if I
know anything about users).</li>
</ul>


<h2>Show me the code</h2>

<p>Inside the Aurelia app, I&rsquo;ve created a component called &ldquo;<em>TooltipService</em>&rdquo; which is responsible for
orchestrating the walkthrough. There&rsquo;s also a separate data holder class &ldquo;<em>Tooltips</em>&rdquo; that declaratively defines all walkthrough
steps and their contents, positions etc.</p>

<p>Tooltips are created using the <a href="http://v4-alpha.getbootstrap.com/components/popovers/">popover component from Bootstrap 4</a>
(still in alpha at the time of this writing).</p>

<br/>


<script src="https://gist.github.com/hakant/48a5b7c5a4e4f34102f393fbd80dc783.js"></script>




<br/>


<script src="https://gist.github.com/hakant/36345d12467d304e29e444430a8bf747.js"></script>


<p></p>

<p>~Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hackathon Planner &amp; My experience with Aurelia so far]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/04/06/hackathon-planner-and-my-experience-with-aurelia-so-far/"/>
    <updated>2016-04-06T02:00:00+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/04/06/hackathon-planner-and-my-experience-with-aurelia-so-far</id>
    <content type="html"><![CDATA[<p>~2 months ago <a href="http://www.hakantuncer.com/blog/2016/01/30/hackathon-planner-for-nipo-software/">I wrote about Hackathon Planner</a>
and hustled the idea as a candidate project for the next hackathon at NIPO Software. Then the hackathon day arrived.
We formed a team of 6 and spent a day working on it. Rutger shot a time lapse video from that day.</p>

<br/>




<iframe width="700" height="393" src="https://www.youtube.com/embed/GMK8vvJm87A" frameborder="0" allowfullscreen></iframe>


<p>Since then, I continue working on the Hackathon Planner whenever I find some free time here and there. Rutger also
occasionally shows up in the commit history contributing with his CSS superpowers.</p>

<p>I use <a href="https://azure.microsoft.com/en-us/">Azure</a> everyday at work and this time I want to experiement with
<a href="https://aws.amazon.com/">AWS</a>. I&rsquo;ve put up an <a href="http://hackathonplanner.s3-website.eu-central-1.amazonaws.com/">early preview of Hackathon Planner</a>
on Amazon S3. I&rsquo;ll keep updating it from this point on. At the time of this writing, it&rsquo;s only a client
side preview &ndash; actions are only saved on the local storage of the browser. Not very useful yet but it soon will be.
<a href="http://hackathonplanner.s3-website.eu-central-1.amazonaws.com/">Check it out.</a></p>

<h2>Aurelia</h2>

<p><a href="http://aurelia.io/">Aurelia</a> has been my framework of choice for this
<a href="https://en.wikipedia.org/wiki/Single-page_application">single page application</a>. It truly is a great framework in
the sense that it really gets out of your way. After I learned some of the fundamentals of Aurelia, I was basically
good to go. Some periods I even forgot that I was using a framework because it is simply not in your face. Let me
show you some code samples from the project.</p>

<br/>


<h4>ES6 and ES7 in action</h4>

<p>Aurelia takes advantage of the latest javascript standards as much as possible. Take a look at this &ldquo;nav-bar&rdquo;
component from the Hackathon Planner.</p>

<br/>


<script src="https://gist.github.com/hakant/27562e37df6d7bf59f24fd12b316045a.js"></script>


<ul>
<li>First three lines are an example of <a href="https://developer.mozilla.org/en/docs/web/javascript/reference/statements/import">ES6 module importing</a>.
This is how a javascript module can make use of code from external libraries.</li>
<li>Line #5 is an example of an <a href="https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841#.5obmn2df6">ES7 Decorator</a> that is in this case
<a href="http://eisenbergeffect.bluespire.com/aurelia-update-with-decorators-ie9-and-more/">used by Aurelia for dependency injection</a>.
Basically we&rsquo;re telling Aurelia to pass those components as constructor arguments to the NavBar component.</li>
<li>And the rest of the code is the NavBar class that is written based on the <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes">ES6 class specification</a>.
See how clean this component is &ndash; it&rsquo;s pure javascript.</li>
</ul>


<br/>  


<h4>Dynamic application root</h4>

<p>Code below is the entry point to the Hackathon Planner: &ldquo;main.js&rdquo;.</p>

<br/>


<script src="https://gist.github.com/hakant/8c94080e4c61ea04bfaf1a009dbcc25b.js"></script>


<ul>
<li>Line #2 imports a custom authentication service that I wrote and it gets resolved as a singleton instance at line #13.
In Aurelia all dependencies are registered as singleton by default (unless you specify it otherwise).</li>
<li>Based on the authentication status (line #14) aurelia app root is set either to the app or to the login
component. The ability to set arbitrary application roots is a powerful feature of Aurelia that enables some
<a href="http://patrickwalters.net/creating-multipage-apps-using-aurelia-2/">interesting scenarios</a>.</li>
<li>I borrowed this idea from <a href="http://davismj.me/blog/aurelia-auth-pt2/">Matthew James Davis</a>.</li>
</ul>


<br/>


<h4>Validation</h4>

<p>Aurelia also comes with a <a href="https://github.com/aurelia/validation">validation plugin</a> and <a href="http://blog.durandal.io/2016/03/23/aurelia-babel-6-and-jspm-update/">it&rsquo;s currently undergoing some big refactoring</a>.
It still wouldn&rsquo;t hurt to show how it looks like at the moment. Note that the @ensure decorator is recently
deprecated (which means I&rsquo;ll also need to adapt this code going forward).</p>

<p>This is a stripped down version of the project class in Hackathon Planner:</p>

<br/>


<script src="https://gist.github.com/hakant/69363eaf32e2052d2d2697335704555e.js"></script>


<ul>
<li>Line #8 and #10 sets validation rules on those properties and line #20 initializes the validation for this
object.</li>
</ul>


<p>And this event handler in &ldquo;new-card.js&rdquo; validates a project before adding or updating it:</p>

<br/>


<script src="https://gist.github.com/hakant/bbb87af2f2306724bbd1981973b8d83f.js"></script>


<br/>


<h4>Beautiful components</h4>

<p>In Aurelia, user interface components are composed of <a href="http://aurelia.io/docs.html#/aurelia/framework/1.0.0-beta.1.1.4/doc/article/creating-components">view and view-model pairs</a>.
These two are created by Aurelia&rsquo;s dependency injection framework and gets linked to each other via data binding.</p>

<p>Here is one of those pairs from the Hackathon Planner. This is how the overview page is rendered:</p>

<br/>


<script src="https://gist.github.com/hakant/6ab1a376f50b80bd115f765e16a551f4.js"></script>




<br/>


<script src="https://gist.github.com/hakant/7296309c6a7166254ac701a6b27caf47.js"></script>


<p></p>

<ul>
<li>Notice how a component is required into a template at line #2.</li>
<li>And then all projects are looped through and each one is rendered into another component called &ldquo;idea-card&rdquo;
at line #5.</li>
</ul>


<p>Thank you for reading and make sure you check out the <a href="https://github.com/hakant/HackathonPlanner">Hackathon Planner on GitHub</a>
and <a href="http://hackathonplanner.s3-website.eu-central-1.amazonaws.com/">its early preview deployment</a>.</p>

<p>~Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hackathon Planner for <br/> { NIPO Software }]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/01/30/hackathon-planner-for-nipo-software/"/>
    <updated>2016-01-30T09:29:33+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/01/30/hackathon-planner-for-nipo-software</id>
    <content type="html"><![CDATA[<p>I learn best by practicing. When I only read (i.e no practicing, no note taking), I almost completely forget what I learned after a month or two. I think most people are wired this way. Think about a book you read 6 months ago and see how much of it you can still remember. It&rsquo;s scary.</p>

<p>Learning something new in programming is no different. Maybe even worse. But there&rsquo;s good news, because in programming <a href="http://jamesclear.com/learning-vs-practicing">learning by practicing</a> is very easy. You just need a computer and that&rsquo;s it! And hey, now we&rsquo;re in the cloud era. If you need more, go and get what you need with a couple of clicks! It&rsquo;s crazy how much programmers can do these days while sitting on a couch with a cup of coffee. You just need some time and passion. The rest is simply there available for you to grab.</p>

<h2>Hackathons</h2>

<p><a href="https://en.wikipedia.org/wiki/Hackathon">Hackathons</a> are a great way of <a href="http://news.uchicago.edu/article/2015/04/29/learning-doing-helps-students-perform-better-science">learning by doing</a> and we at <a href="http://niposoftware.com/">NIPO Software</a> have started making this a company tradition for a year or so, thanks to my colleague <a href="https://twitter.com/qaidj">Qa&#8217;id Jacobs</a> who took the first initiative and continues to put effort into organizing them. Below are some pictures from our last hackathon around summer of 2015.</p>

<p><img src="http://www.hakantuncer.com/assets/Hackathon_Planner/Hackathon_NIPO_1.jpg" alt="NIPO Software Summer 2015 Hackathon 1" /></p>

<p><img src="http://www.hakantuncer.com/assets/Hackathon_Planner/Hackathon_NIPO_2.jpg" alt="NIPO Software Summer 2015 Hackathon 2" /></p>

<p><img src="http://www.hakantuncer.com/assets/Hackathon_Planner/Hackathon_NIPO_3.jpg" alt="NIPO Software Summer 2015 Hackathon 3" /></p>

<p>One of the ideas during this hackathon was building a &ldquo;Hackathon Planner&rdquo;. It didn&rsquo;t get enough love, so was never picked up. Currently all ideas and team compositions are kept and maintained in an Excel file &ndash; the best and the worst tool of all times in computing history. So how about building a planner that can help people capturing ideas and forming teams around those ideas in a fun way?</p>

<h2>A Hackathon Planner &ndash; <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a></h2>

<p>A minimum viable hackathon planner;</p>

<ul>
<li>should be open source (not only <a href="http://niposoftware.com/">NIPO Software</a>, anyone or any company should be able to make use of it if they want to do so).</li>
<li>should allow capturing of ideas in a modern way (I hear <a href="https://en.wikipedia.org/wiki/Single-page_application">SPAs</a>, <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>, subtle animations, web sockets, responsive design).</li>
<li>should allow simple ways of reacting to those ideas (i.e sending likes and possibly comments in the future).</li>
<li>should be simple to sign up and login (built in GitHub authentication?).</li>
<li>should allow a simple way of forming teams (mark the idea/team that you want to join and done!).</li>
<li>should allow live monitoring of teams as they form and evolve. It makes the team formation process more exciting to follow. Watching as ideas live and die (<a href="http://www.asp.net/signalr">signalR</a>,  <a href="http://socket.io/">socket.io</a> ?).</li>
</ul>


<p>Based on these thoughts above I&rsquo;ve created a very basic sketch that can give a general idea:</p>

<p><img src="http://www.hakantuncer.com/assets/Hackathon_Planner/Hackathon_Idea_Details.png" alt="Hackathon Planner - Mockup" /></p>

<h2>Ingredients</h2>

<p>I&rsquo;m very much into <a href="http://aurelia.io/">Aurelia</a> and <a href="https://nodejs.org/">node.js</a> these days. So that&rsquo;s what I&rsquo;ll be using. Sure I&rsquo;ll throw in a NoSQL database too and see how much these decisions will hurt me during production.</p>

<p>I saw <a href="https://twitter.com/jbogard/">@jbogard</a> putting it nicely:</p>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">one thing i try very hard to do is to not promote any tool/language/framework/platform/pattern until i&#39;ve had to support it in production</p>&mdash; Jimmy Bogard (@jbogard) <a href="https://twitter.com/jbogard/status/691992462483677184">January 26, 2016</a></blockquote>


<p> <script async src="http://www.hakantuncer.com//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>I recently have this theory: How cool a platform, framework, database or a language is directly proportional to the amount of pain one will get during production support.</p>

<p>So we’ll see how this one goes with the choices that I made.. if I can stop slacking off and get to finish the MVP of course.</p>

<p>~Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Flow and Happiness]]></title>
    <link href="http://www.hakantuncer.com/blog/2016/01/27/flow-and-happiness/"/>
    <updated>2016-01-27T19:20:16+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2016/01/27/flow-and-happiness</id>
    <content type="html"><![CDATA[<p>Every now and then I read about rich people talking about the correlation between money, happiness and self fulfillment. More often than not, it&rsquo;s the lack of correlation that they talk about.</p>

<p>There&rsquo;s no doubt that one has to have access to a certain level of income to satisfy the layers in the <a href="https://en.wikipedia.org/wiki/Maslow%27s_hierarchy_of_needs">hierarchy of needs</a>.
On the other hand it&rsquo;s a well known idea &amp; <a href="https://m.signalvnoise.com/the-day-i-became-a-millionaire-55d7dc4d8293#.7894yhemj">experience</a> that more money has diminishing returns on happiness:</p>

<p><img src="http://i.kinja-img.com/gawker-media/image/upload/s--nRxsykqe--/18ky34hbt2b12jpg.jpg" alt="money &amp; hamburger" /></p>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">Hanging out in ibiza with a bunch of friends and partying with famous people, able to do whatever I want, and I&#39;ve never felt more isolated.</p>&mdash; Markus Persson (@notch) <a href="https://twitter.com/notch/status/637563038258868224">August 29, 2015</a></blockquote>


<script async src="http://www.hakantuncer.com//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>I&rsquo;ve started reading this book, <a href="http://www.amazon.com/Flow-Psychology-Happiness-Mihaly-Csikszentmihalyi-ebook/dp/B00GO8HZIW">Flow: The Psychology of Happiness</a> by <a href="https://en.wikipedia.org/wiki/Mihaly_Csikszentmihalyi">Mihaly Csikszentmihalyi</a>. It starts with a simple claim:</p>

<blockquote><p>We humans have a built-in dissatisfaction with what we have and what we own. Material world does not make us happy. Unless we can moderate this dissatisfaction and start enjoying the moment we&rsquo;ll be disappointed.</p></blockquote>

<p>This has always made perfect sense to me. Materials by themselves aren&rsquo;t worth anything. At the end of the day it all comes down to what we do with them, or most importantly, what we actually do with our lives.</p>

<p>Here&rsquo;s another excerpt from a WSJ article <a href="http://www.wsj.com/articles/can-money-buy-happiness-heres-what-science-has-to-say-1415569538">&ldquo;Can Money Buy You Happiness?&rdquo;</a>:</p>

<blockquote><p>In short, this latest research suggests, wealth alone doesn’t provide any guarantee of a good life. What matters a lot more than a big income is how people spend it. For instance, giving money away makes people a lot happier than lavishing it on themselves. And when they do spend money on themselves, people are a lot happier when they use it for experiences like travel than for material goods.</p></blockquote>

<h2>Enter Flow</h2>

<p>Lately, I&rsquo;ve been discovering that flow is one of the sources of happiness in life (maybe the most powerful one!). It is also a very rewarding state to be in. Pleasure is also a source of happiness, but unlike pleasure, the enjoyment that comes with flow leads to growth and higher levels of complexity.</p>

<p>Flow is defined in <a href="https://en.wikipedia.org/wiki/Flow_(psychology">Wikipedia</a> as:</p>

<blockquote><p>In positive psychology, flow, also known as the zone, is the mental state of operation in which a person performing an activity is fully immersed in a feeling of energized focus, full involvement, and enjoyment in the process of the activity. In essence, flow is characterized by complete absorption in what one does.</p></blockquote>

<h2>8 Major Conditions of Flow</h2>

<p>In his book, Mihaly Csikszentmihalyi describes the 8 components of flow-like activities. Know these conditions and try to apply them to what you do everyday.</p>

<ol>
<li><p><strong>Clear Goals.</strong> Knowing what we have to do very clearly. Not only the big goal, but also each step of these activities should be well defined. Playing chess, tennis or a musical instrument naturally falls into these type of activities, but with a bit of conscious effort we can apply this idea to many day to day activities.</p></li>
<li><p><strong> Immediate Feedback.</strong> Knowing how well we are doing. Getting clear and constant flow of feedback. Not having this type of feedback makes it easier to get distracted.</p></li>
<li><p><strong>Challenges of the activities are met with the right level of skills of the person.</strong> What needs to be done is in balance with what we can do. When a job is hard, demanding or very easy we can get stressed or distracted. If it&rsquo;s a match, then it becomes enjoyable.</p></li>
<li><p><strong>Feeling a focus and concentration on what you&rsquo;re doing.</strong> In flow, the split attention (that we usually have) focuses into a single beam of attention. Here we can achieve so much more.</p></li>
<li><p><strong>Everyday&rsquo;s frustrations are gone.</strong> During flow, we don&rsquo;t worry about anything anymore because our mind is not wandering &ndash; no future, nor past. It&rsquo;s a form of escape from the real world and creating different realities.</p></li>
<li><p><strong>You feel that you can be in control of your life, your actions, your experience.</strong> The sense of control is a great feeling, it&rsquo;s something that we don&rsquo;t feel during our everyday lives.</p></li>
<li><p><strong>Loose a sense of subconsciousness &ndash; the ego defense.</strong> We usually worry about how other people think of us. It&rsquo;s a feeling of self-monitoring, a state of defensiveness, a frequent questioning of how we look and so on. During flow we go beyond ego (transcendence). One of the paradoxes of flow is that during the experience we forget about ourselves but after the experience we come back stronger, because we know that we&rsquo;ve accomplished something and that makes a positive impact on our self confidence.</p></li>
<li><p><strong>Sense of time seems to be transformed.</strong> During flow, sometimes hours get condensed into minutes. Sometimes a couple of seconds feel like minutes, because so much is packed in the moment (for physical activities). Time adopts itself to your activities rather than the other way around. Rather than you boxing your life into time, you can change the time.</p></li>
</ol>


<h2>Flow vs Agile teams &amp; Open Offices</h2>

<p>Programming is a great flow-like activity. It also naturally fits all conditions above, and yet the agile movement and the open-office model has started an open season on flow: <strong>kill on sight!</strong></p>

<p>I&rsquo;ve done a <a href="https://www.google.nl/webhp?hl=en#hl=en&amp;q=open+offices+productivity">google search on &ldquo;open office productivity&rdquo;</a> and it seems like in the last few years it has attracted a lot of negative criticism. Some examples are <a href="https://www.washingtonpost.com/posteverything/wp/2014/12/30/google-got-it-wrong-the-open-office-trend-is-destroying-the-workplace/">&ldquo;The open-office trend is destroying the workplace&rdquo;</a>, <a href="https://www.americanexpress.com/us/small-business/openforum/articles/open-office-backlash-seeking-productivity-in-a-noisy-world/">&ldquo;Open-Office Backlash: Seeking Productivity in a Noisy World&rdquo;</a>, <a href="http://www.newyorker.com/currency-tag/the-open-office-trap">&ldquo;The open-office trap&rdquo;</a>.</p>

<p>There&rsquo;s not much consensus around the topic. Facebook is the <a href="http://www.forbes.com/sites/kevinkruse/2012/08/25/facebook-unveils-new-campus-will-workers-be-sick-stressed-and-dissatisfied/#f08022b13351">biggest fan of the open-office model</a> while Stack Overflow made it clear that <a href="https://blog.stackoverflow.com/2015/01/why-we-still-believe-in-private-offices/">they still believe in private offices</a>. It also appears that <a href="http://www.bbc.com/capital/story/20140911-open-office-victims-push-back">Microsoft is still pushing back on the open-office trend</a> by saying: &ldquo;Too much togetherness can sap productivity and creativity&rdquo;.</p>

<p>Does flow matter to you? And how do you like to work within your team?</p>

<p>~Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Zen of Architecture]]></title>
    <link href="http://www.hakantuncer.com/blog/2015/06/28/zen-of-architecture/"/>
    <updated>2015-06-28T13:19:40+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2015/06/28/zen-of-architecture</id>
    <content type="html"><![CDATA[<p><a href="http://www.hakantuncer.com/blog/2015/05/02/devintersection-and-anglebrackets-in-phoenix/">I was at DevIntersection Conference</a> in Phoenix around mid May 2015. Apart from the regular conference schedule, I took a few interesting workshops one of which was &ldquo;Zen of Architecture&rdquo; by <a href="http://www.oreilly.com/pub/au/741">Juval Lowy</a>.</p>

<p>As the name clearly implies one day workshop was all about software architecture and the ways to approach it. Juval talked about a method that he uses for decomposing systems and making design decisions.</p>

<p>It was a full day of content storm with as little breaks in between as possible (this is the Juval style I suppose). I&rsquo;ve been reviewing my notes and presentation slides thinking this can become a book if I try to write everything. So instead, this post focuses on a certain part of the workshop which I think covers the core idea.</p>

<h2>The Method</h2>

<p>Juval introduces a method which he calls &ldquo;The Method&rdquo; for decomposing a system. Achieving the right decomposition of a system is one of the most important things in software architecture. The end result of your decomposition is your architecture.</p>

<blockquote><p>For the beginner architect, there are many options<br/>
For the master architect, there are only a few</p></blockquote>

<h2>Functional Decomposition</h2>

<p>The biggest sin of any software architect. Never ever do functional decomposition!</p>

<br/>


<h4>What is it?</h4>

<ul>
<li>This is also known as the flow-chart decomposition.</li>
<li>Basing services and system components on the order of logical steps in use cases.</li>
<li>Decomposing the system based on features, functional requirements and time.</li>
</ul>


<p>Juval emotionally talks about &ldquo;functional decomposition&rdquo; easily for more than an hour. Can&rsquo;t repeat enough how bad it is and how we&rsquo;re all guilty of doing it from time to time and why we should be very conscious about resisting our bad habits. Say &ldquo;functional decomposition&rdquo; to Juval one more time and he&rsquo;ll kill you right there without blinking.</p>

<br/>


<h4>Why is it so bad?</h4>

<ul>
<li>It leads to duplicating behaviors across services.</li>
<li>It leads to explosion and bloating of services and intricate relationships inside and between them.</li>
<li>It couples multiple services to data contract.</li>
<li>Promotes implementing use cases in higher level terms thus difficult to reuse same behavior in another use case.</li>
<li>Couples services to order and current use cases.</li>
<li>Prevents single point of entry.</li>
</ul>


<br/>


<h4>Example of Functional Decomposition</h4>

<p>Here are  a few slides from the workshop that shows Functional Decomposition in action.</p>

<p><img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2021.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2023.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2024.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2025.jpg" style="border: solid;"></p>

<h2>Volatility-Based Decomposition</h2>

<p>If you would learn one thing from this entire course this should be it, Juval mentioned repeatedly. <strong>You should always decompose a system based on volatility.</strong></p>

<ul>
<li>Identify areas of potential change and encapsulate them in services.</li>
<li>Look for functional potential changes but <strong>not domain functional</strong>. Meaning that while looking for volatility, don&rsquo;t speculate on potential changes to the nature of the business. Don&rsquo;t overdo it.</li>
<li>Implement behavior as interactions between services or subsystems.</li>
<li>Create your milestones based on integration of these services not features.</li>
</ul>


<p>This is the universal principle of good design says Juval. Encapsulate change to insulate. Do not resonate with change. Functional decomposition on the other hand maximizes the impact of change because it&rsquo;s coupled to it.</p>

<br/>


<h4>Challenges with Volatility-Based Decomposition</h4>

<p>There are challenges in creating a Volatility-Based Decomposition. First of all it usually takes longer than functional because volatility is not often self evident. On the other hand features are kept thrown at your face. People around you are feature thirsty, they&rsquo;ll keep asking for their features. You should instead fight the insanity and focus on the bigger picture and volatilities. Getting the management support is usually another challenge. Juval said architects should be responsible, fight against these opposing forces and do what is right.</p>

<br/>


<h4>Axes of volatility</h4>

<p>There are two axes of volatility.</p>

<ul>
<li>At the same customer over time</li>
<li>At the same time across customers</li>
</ul>


<p>These axes should be independent from each other. So encapsulate them from each other as well. When they&rsquo;re not independent it&rsquo;s a sign of functional decomposition.</p>

<p>Prior to architecture and decomposition, as part of requirements gathering and analysis, prepare a list of areas of volatility. Ask what could change along the axes of volatility.</p>

<br/>


<h4>Example of Volatility-Based Decomposition</h4>

<p>Below, you&rsquo;ll find 5 slides from the workshop that brainstorms on possible volatilities of a trading system. Here are some guidelines for capturing volatility:</p>

<ul>
<li>The objective is to have a mindset of &ldquo;what could possibly change?&rdquo;</li>
<li>Capturing the areas of volatility earlier is better than later. The later you figure it out the more it will cost you.</li>
<li>Once settled on the ares of volatility encapsulate them in components of architecture.</li>
<li>You don&rsquo;t need an exhaustive list. This is a process of diminishing returns. Don&rsquo;t overdo it.</li>
<li>Some volatile areas may relate too much to the nature of your business. This type of volatility is out of your scope.</li>
</ul>


<p><img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2026.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2027.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2028.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2029.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2030.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2032.jpg" style="border: solid;"></p>

<br/>


<h4>Let&rsquo;s analyze this decomposition.</h4>

<p>Transition from list of areas of volatility to services is hardly ever pure 1:1. Sometimes a single service encapsulates multiple areas. Some areas may map to an operational concept or may be encapsulated in a third party component.</p>

<p>Always encapsulate the data storage volatility behind data access services. Encapsulate where the storage is, what technology is used to access it and refer your storage as storage, not as database or whatever the actual technology is.</p>

<p>Following 3 slides do further analysis of the decomposition in this example. Please refer to the diagram above as you read the key points:</p>

<p><img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2034.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2035.jpg" style="border: solid;">
<img src="http://www.hakantuncer.com/assets/Zen_of_Architecture/IMG_2036.jpg" style="border: solid;"></p>

<h2>Decomposition and Business</h2>

<p>Avoid encapsulating changes to the nature of your business. Because</p>

<ul>
<li>you&rsquo;ll need it very rarely</li>
<li>you&rsquo;ll be diving into speculation and speculation based design trap</li>
<li>when you do it you&rsquo;ll probably do it very poorly because there are too many unknowns (and again speculations)</li>
</ul>


<p>While designing a system for your business don&rsquo;t only focus on your own also keep your competitor in mind. Design both for you and your competitor. This is a useful posture in designing systems and it&rsquo;s not about features or functionality but it&rsquo;s about understanding the nature of the business. Keeping your competitors in mind and not only focusing on your own business will help you understand the nature of the business even better. This way you can have a better judgement about what is volatile and what is not.</p>

<h2>Decomposition and Longevity</h2>

<p>Volatility is very closely tied to longevity. The longer things do not change the longer they have till they do change or are replaced. The more frequently things change the more likely they would change in the future.</p>

<p>You must take into account impact from change regardless of your requirements. Ask yourself what has changed over the past 5-7 years and what will change in the next 5-7 years. Encapsulate things that would change within the life of your system.</p>

<h2>Further topics</h2>

<p>For the rest of the day Juval dived into</p>

<ul>
<li>layered architectures</li>
<li>typical layers</li>
<li>definition of managers, engines, resource access services and differences between them</li>
<li>open and closed architectures</li>
<li>what not to do when using &ldquo;the method&rdquo;</li>
<li>creating call graphs within system components and observing/revealing anti-patterns</li>
<li>a bonus section called &ldquo;what about agile?&rdquo;</li>
</ul>


<p>All in all it was a mind tickling workshop and I hope I could give you more than only a taste. I may write other posts about the bullet points above if/when I find the time.</p>

<p>Thanks for reading</p>

<p>Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[DevIntersection &amp; AngleBrackets in Phoenix]]></title>
    <link href="http://www.hakantuncer.com/blog/2015/05/02/devintersection-and-anglebrackets-in-phoenix/"/>
    <updated>2015-05-02T13:46:06+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2015/05/02/devintersection-and-anglebrackets-in-phoenix</id>
    <content type="html"><![CDATA[<p>It&rsquo;s conference season again! Developers from <a href="http://www.niposoftware.com/" target="_blank">NIPO Software</a> were in <a href="http://channel9.msdn.com/Events/Build/2014">Build 2014</a> and <a href="http://www.ndcoslo.com">NDC Oslo 2014</a> last year. This year we&rsquo;ll be at <a href="http://www.ndcoslo.com">NDC Oslo</a> again but this time I myself will be heading to <a href="http://devintersection.com">DevIntersection</a> &amp; <a href="https://anglebrackets.org/">AngleBrackets</a> joint conferences.</p>

<p>Norwegian Developers Conference (NDC) is I think one of the best and I&rsquo;d really enjoyed it last year. But change is good.</p>

<p>Following a deep consideration I reckon that I can&rsquo;t go to Norway again&hellip; Not after all those shrimps I had to sit face to face in Oslo (see OsloFjord Cruises). My friend Bjorn is very disciplined about reminding that to me consistently.</p>

<br/>


<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/hakant">@hakant</a> &quot;We are eagerly awaiting your visit Mr Tuncer&#8230;&quot; <a href="http://t.co/JuG6axnSsO">pic.twitter.com/JuG6axnSsO</a></p>&mdash; Bjorn Coltof (@bjorn_coltof) <a href="https://twitter.com/bjorn_coltof/status/593866800149995521">April 30, 2015</a></blockquote>


<p> <script async src="http://www.hakantuncer.com//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<h2>What&rsquo;s going to happen there</h2>

<p>DevIntersection has a number of tracks which are called &ldquo;intersections&rdquo;:</p>

<p><img src="http://www.hakantuncer.com/assets/AngleBrackets_DevIntersection/devintersection_tracks.png" alt="DevIntersection Tracks" /></p>

<p>ASP.NET, Visual Studio and Azure intersections are grouped together since they&rsquo;re highly related to each other. This group of tracks will be my main interest in Phoenix together with the bonus open web event: <a href="https://anglebrackets.org/">anglebrackets</a>.</p>

<p>An exciting aspect of DevIntersection 2015 is that it&rsquo;s the first conference after <a href="http://channel9.msdn.com/Events/Build/2015">Build 2015</a> at which Microsoft made <a href="http://venturebeat.com/2015/04/29/everything-that-happened-at-the-2015-microsoft-build-developer-conference/">a number of big announcements</a>. There&rsquo;s a more detailed list and link aggregation about Build 2015 <a href="http://blog.cwa.me.uk/2015/04/30/the-morning-brew-1851/">here</a> and <a href="http://blog.cwa.me.uk/2015/05/01/the-morning-brew-1852/">here</a> which I highly recommend.</p>

<p>Here is a piece from the official event site:</p>

<blockquote><p>We invite you to the most dynamic developer event in our industry at the next DEVintersection, May 2015. This event is POST BUILD and IGNITE which will allow our presenters to go deep into the new releases and technologies announced. We will focus on Visual Studio, ASP.net, HTML5, Microsoft Azure, XAML, ALM, Architecture, Design and in the bonus co-located open web event anglebrackets we feature Angular JS, HTML5, CSS, Java Script, SPA, SEO, Speech enabled Mobile Apps, Design and much more.</p></blockquote>

<h2>The Schedule</h2>

<p>I&rsquo;ll be attending three workshops. Two of them are before the conference and last one is after the conference on Friday. Each workshop is a day long.</p>

<h2><img src="http://www.hakantuncer.com/assets/AngleBrackets_DevIntersection/DevIntersection%20Workshops_1.png" alt="DevIntersection Tracks" /></h2>

<h2><img src="http://www.hakantuncer.com/assets/AngleBrackets_DevIntersection/DevIntersection%20Workshops_2.png" alt="DevIntersection Tracks" /></h2>

<p>And for the conference itself, I&rsquo;ve looked at the schedule and marked the sessions I&rsquo;m interested in so far. For a number of slots I&rsquo;ve picked more than one session for now &ndash; I&rsquo;ll have to pick one of them on the spot.</p>

<h2><img src="http://www.hakantuncer.com/assets/AngleBrackets_DevIntersection/DevIntersection_Schedule_Tuesday.png" alt="DevIntersection Tracks" /></h2>

<h2><img src="http://www.hakantuncer.com/assets/AngleBrackets_DevIntersection/DevIntersection_Schedule_Wednesday.png" alt="DevIntersection Tracks" /></h2>

<p><img src="http://www.hakantuncer.com/assets/AngleBrackets_DevIntersection/DevIntersection_Schedule_Thursday.png" alt="DevIntersection Tracks" /></p>

<p>As usual I&rsquo;ll be sharing my experiences from the event on twitter and facebook. You can follow me on twitter using <a href="https://twitter.com/hakant">@hakant</a>. And in case you&rsquo;re reading this and also going to DevIntersection in May let&rsquo;s connect and meet there!</p>

<p>Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Notes on Finalization and Disposition in .NET]]></title>
    <link href="http://www.hakantuncer.com/blog/2015/03/12/finalization-and-disposition-in-net/"/>
    <updated>2015-03-12T22:04:15+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2015/03/12/finalization-and-disposition-in-net</id>
    <content type="html"><![CDATA[<p>Have you ever thought why disposition pattern is designed the way it is? I hadn&rsquo;t. Sometimes we learn things along the way and never question its basics or roots again. We do it that way because we&rsquo;re told so or because it just worked so far and we never looked back.</p>

<p>Nicole Calinoiu&rsquo;s talk from NDC Oslo taught me many things one of which is how IDisposable pattern is designed and became the way it is. It&rsquo;s an awesome talk, one that I can strongly recommend. I&rsquo;ve embedded the video at the bottom of this page, make sure to check it out.</p>

<p>I saw the talk twice and wanted to take notes for myself. Notes that I can revisit when the details get blurry in my head six months or a year down the path. I&rsquo;ve also double checked or dived into some other details through MSDN and included those in the notes as well.</p>

<h2>Finalization</h2>

<ul>
<li><p>Never ever set any object to NULL to &ldquo;help&rdquo; Garbage Collector do his job. You&rsquo;re not helping him and even making things worse.</p></li>
<li><p>Although .NET Runtime knows about cleaning up memory really well, it can&rsquo;t possibly know the shared resources (file system, network connections, registery etc&hellip;) that your objects are using. Finalization is the object&rsquo;s opportunity to cleanup those resources when it&rsquo;s about to be removed from the memory.</p></li>
<li><p>If a .NET object overrides the method Object.Finalize(), the Garbage Collector will call the Finalize method before cleaning up the object from memory.</p></li>
<li><p>If the object does not override the method Finalize, Garbage Collector doesn&rsquo;t finalize the object (obviously). Here is what <a href="https://msdn.microsoft.com/en-us/library/system.object.finalize%28v=vs.110%29.aspx" target="_blank">MSDN</a> says:</p></li>
</ul>


<blockquote><p>The garbage collector does not mark types derived from Object for finalization unless they override the Finalize method.</p></blockquote>

<ul>
<li>Now comes the part that&rsquo;s obscure in the MSDN documentation. <a href="https://msdn.microsoft.com/en-us/library/system.object.finalize%28v=vs.110%29.aspx" target="_blank">MSDN</a> says (emphasis mine):</li>
</ul>


<blockquote><p>You should override Finalize for a class that uses <strong>unmanaged resources</strong> such as file handles or database connections that must be released when the managed object that uses them is discarded during garbage collection.</p></blockquote>

<ul>
<li><p><strong>Unmanaged resources</strong> mentioned in the documentation are <strong>NOT</strong> the managed wrappers. If you have code that directly uses IntPtr and DllImport then you&rsquo;re using unmanaged resources and you need to be thinking about Finalization.</p></li>
<li><p>Managed wrappers have their own Finalizers (hopefully) so it&rsquo;s not your responsibility to supply another Finalizer on top of that. But if you have any code in a class that looks like the one below, then you need a Finalizer for that specific class.</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[DllImport(&quot;advapi32.dll&quot;, CharSet= CharSet.Auto, SetLastError=true)]</span>
</div><div class='line'><span class="k">private</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">int</span> <span class="nf">RegOpenKeyEx</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">hKey</span><span class="p">,</span>
</div><div class='line'>                                       <span class="n">String</span> <span class="n">lpSubKey</span><span class="p">,</span>
</div><div class='line'>                                       <span class="kt">int</span> <span class="n">ulOptions</span><span class="p">,</span>
</div><div class='line'>                                       <span class="kt">int</span> <span class="n">samDesired</span><span class="p">,</span>
</div><div class='line'>                                       <span class="k">out</span> <span class="n">IntPtr</span> <span class="n">phkResult</span><span class="p">);</span></div></code></pre></td></tr></table></div></figure>


<p></p>

<ul>
<li><p>Writing an <strong>unnecessary</strong> Finalizer comes with a cost: delaying the cleanup process of your objects. Finalization brings extra steps to the cleaning process (adding those objects to Finalization queue and running their Finalization logic in a separate thread) which delay freeing up memory for those objects. So beware.</p></li>
<li><p>Finalizers should not access any managed resources. Any managed resource at that point could already be harvested by garbage collector. So basically none of the managed objects can be trusted to exist. Finalizers should only cleanup the unmanaged resources and return.</p></li>
</ul>


<h2>Disposition</h2>

<ul>
<li><p>Finalization happens when the Garbage Collector &ldquo;feels like it&rdquo;. In general you don&rsquo;t have (and shouldn&rsquo;t take) any control on when the GC is running or not. But wouldn&rsquo;t it be nice to cleanup and let go of those shared resources when they&rsquo;re not needed anymore? Hell yeah. It would be terrible to keep locking a file and wait until GC comes to clean it up. This is exactly why Disposition exists.</p></li>
<li><p>When a class implements IDisposable it is basically declaring that it needs to be cleaned up. Whenever you&rsquo;re done with an IDisposable class and you know you&rsquo;re the <strong>only</strong> one using it or the <strong>owner</strong> of its lifecycle, you need to call its Dispose method to clean it up.</p></li>
<li><p>While Disposing a class and releasing its shared resources, we also want to call Finalize if our class is Finalizable. If you try to do that though, compiler gives an error message: &ldquo;Destructors and Finalize can not be called directly&rdquo;. That&rsquo;s why there is a pattern called IDisposable pattern.</p></li>
<li><p><a href="https://msdn.microsoft.com/en-us/library/system.idisposable(v=vs.110).aspx" target="_blank">MSDN documentation on IDisposable interface</a> includes a C# code sample showing how the pattern should be implemented. Notice that because Finalize can not be called directly, another Dispose method is introduced that takes a boolean argument which determines whether the class is being disposed or finalized.</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</div><div class='line'><span class="k">class</span> <span class="nc">BaseClass</span> <span class="p">:</span> <span class="n">IDisposable</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>   <span class="c1">// Flag: Has Dispose already been called? </span>
</div><div class='line'>   <span class="kt">bool</span> <span class="n">disposed</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
</div><div class='line'>   <span class="c1">// Public implementation of Dispose pattern callable by consumers. </span>
</div><div class='line'>   <span class="k">public</span> <span class="k">void</span> <span class="nf">Dispose</span><span class="p">()</span>
</div><div class='line'>   <span class="p">{</span>
</div><div class='line'>      <span class="n">Dispose</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
</div><div class='line'>      <span class="n">GC</span><span class="p">.</span><span class="n">SuppressFinalize</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</div><div class='line'>   <span class="p">}</span>
</div><div class='line'>   <span class="c1">// Protected implementation of Dispose pattern. </span>
</div><div class='line'>   <span class="k">protected</span> <span class="k">virtual</span> <span class="k">void</span> <span class="nf">Dispose</span><span class="p">(</span><span class="kt">bool</span> <span class="n">disposing</span><span class="p">)</span>
</div><div class='line'>   <span class="p">{</span>
</div><div class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">disposed</span><span class="p">)</span>
</div><div class='line'>         <span class="k">return</span><span class="p">;</span>
</div><div class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">disposing</span><span class="p">)</span> <span class="p">{</span>
</div><div class='line'>         <span class="c1">// Free any other managed objects here. </span>
</div><div class='line'>         <span class="c1">//</span>
</div><div class='line'>      <span class="p">}</span>
</div><div class='line'>      <span class="c1">// Free any unmanaged objects here. </span>
</div><div class='line'>      <span class="c1">//</span>
</div><div class='line'>      <span class="n">disposed</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</div><div class='line'>   <span class="p">}</span>
</div><div class='line'>   <span class="p">~</span><span class="n">BaseClass</span><span class="p">()</span>
</div><div class='line'>   <span class="p">{</span>
</div><div class='line'>      <span class="n">Dispose</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</div><div class='line'>   <span class="p">}</span>
</div><div class='line'><span class="p">}</span></div></code></pre></td></tr></table></div></figure>


<ul>
<li>Let&rsquo;s look at a few important aspects of this implementation:

<ul>
<li>Class keeps track of whether it has been disposed or not and prevents being disposed more than once.</li>
<li>When a class is being Disposed, the Finalization logic also runs. So it tells the Garbage Collector not to bother Finalizing this object anymore (performance gain):</li>
</ul>
</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">GC</span><span class="p">.</span><span class="n">SuppressFinalize</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></div></code></pre></td></tr></table></div></figure>


<ul>
<li><p>These days writing a Finalizer is fairly uncommon. Most .NET applications doesn&rsquo;t require a usage of direct pointer to an unmanaged resource. On top of that, now there is a class called <a href="https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.safehandle%28v=vs.100%29.aspx" target="_blank">SafeHandle</a> which automatically wraps a pointer to an unmanaged resource. It also handles finalization for you. So this means writing a Finalizer now is very very uncommon. Check the article from Joe Duffy all the way back from 2005: <a href="http://joeduffyblog.com/2005/12/27/never-write-a-finalizer-again-well-almost-never/" target="_blank">Never write a finalizer again (well, almost never)</a></p></li>
<li><p>The whole purpose of IDisposable pattern is to accomodate Finalization and Disposition under a single solution. But because you may never ever write a finalizer again, the whole IDisposable pattern ends up being designed to cover a very very corner case. And it&rsquo;s unfortunate that nothing has changed since 2005&hellip;</p></li>
</ul>


<h2>Nicole Calinoiu&rsquo;s talk from NDC Oslo 2014</h2>

<br/>


<iframe src="http://www.hakantuncer.com//player.vimeo.com/video/97519508" width="100%" height="381" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kiwi - Updates & First demo]]></title>
    <link href="http://www.hakantuncer.com/blog/2014/12/08/kiwi-updates-and-first-demo/"/>
    <updated>2014-12-08T19:50:48+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2014/12/08/kiwi-updates-and-first-demo</id>
    <content type="html"><![CDATA[<p>It&rsquo;s been more than a month since I first wrote about Kiwi. <a href="http://www.hakantuncer.com/blog/2014/11/01/building-kiwi/">In that post</a> I had a &ldquo;demo&rdquo; section where I wrote:</p>

<blockquote><p>I was planning to create a screencast to demonstrate how Kiwi works and what it does but didn&rsquo;t get around doing it as part of this blog post. That&rsquo;s high on my to-do list. Another post will be on its way soon.</p></blockquote>

<p>In the last month a lot has happened. Therefore I had to postpone the demo for a bit longer than I thought. We even had to re-evaluate one of the most essential parts of our software after realizing that our first strategy had some weaknesses that we wouldn&rsquo;t be able to fix simply because they were outside of our control. So what do you do when a problem is outside of your control? You find another path and bypass it. At least that&rsquo;s what we did but more on that after the demo.</p>

<h2>Demo</h2>

<p>So first things first. Here is a ~6 minute demo below. Also read on if you&rsquo;re interested in the things that kept us busy in this period.</p>

<iframe width="100%" height="480" src="http://www.hakantuncer.com//www.youtube.com/embed/S1QcnZmyNpA" frameborder="0" allowfullscreen></iframe>


<h2>TripleS vs NIPO format</h2>

<p>When we started implementing Kiwi we thought that we could take TripleS files in order to determine the variables in a questionnaire. It was all good, a TripleS file indeed represents the structure of the questionnaire and the variables in it. But we also thought we could always parse the original NIPO data with it, without converting the data to the TripleS format before each data transfer.</p>

<p>It turned out that this assumption was wrong. Later we&rsquo;ve found out a few scenarios where it was simply impossible to predict the structure of the original data file by looking at the TripleS questionnaire structure alone. F.ex. questionnaires with jumps in the data positions or GOTO statements were resulting in undesired shifts in the variable references.</p>

<p>Being able to transfer data multiple times using the original NIPO data (without using any sort of conversion) is one of our design goals. This design will also enable us to completely automate this process where the user sets up the survey once and then Kiwi does the transfer continuously in the background while also displaying some sort of a dashboard to enable <strong>live visualization</strong> of the data collected during the survey.</p>

<h2>Supporting the VAR format</h2>

<p>To realise this design goal we&rsquo;ve decided to add support for VAR file format. VAR file is similar to TripleS file in the sense that they both represent the structure of a questionnaire and list all the variables in a questionnaire. But unlike the TripleS format, the VAR format doesn&rsquo;t require the data to be converted. VAR file represents the original NIPO data. That&rsquo;s exactly what we want.</p>

<p>So now when defining surveys, Kiwi accepts both TripleS and VAR file formats. If TripleS format is used the data also needs to be converted to TripleS. For a NIPO Software client I assume this will almost never be the preferred way. The most effective way will be to use the VAR file format and transfer the original data directly without any need of conversion. This is what we enabled now.</p>

<h2>Background processing infrastructure</h2>

<p>Kiwi is a web based application. Web applications are designed around quick request and responses with relatively short connection lifetimes between server and clients. However the main job of Kiwi is to process and transfer possibly very large sizes of data. This type of workload necessitates some kind of a background job processing infrastructure because it takes longer times to completely fulfill the incoming requests.</p>

<p>In Kiwi any data transfer request is represented as a background job, meaning that the user&rsquo;s request is processsed asychronously in the background while he can continue doing other things in the application. We&rsquo;re using a framework called <a href="http://hangfire.io/">Hangfire</a> that keeps track of background jobs and manages their state transitions. Hangfire also allows us to simplify the deployment of Kiwi as it hosts the background threads right inside the web application. There is no need for a separate installation.</p>

<p>We want to delight our users and make Kiwi easy and fun to use. We wanted to avoid the need of manually refreshing web pages to find out if a process has finished or not. We&rsquo;re using <a href="http://signalr.net">SignalR</a> to notify user interface about the state changes of the background processes. With this technology, users don&rsquo;t have to do anything manually. The page automatically updates itself in real time as the latest information becomes available.</p>

<h2>Performance, reliability and error handling</h2>

<p>The main difference between a toy software and a real world software is that the former is made for demos and happy path scenarios while the latter is armed with capabilities for handling various real world inputs and conditions. Even when it fails it should fail gracefully with proper and helpful error messages, preferably pointing to some documentation on how to proceed further.</p>

<p>As all developers know very well, error logging is crucial for an application&rsquo;s success. It&rsquo;s one of the most important ways to diagnose the problems that are out there in production. We&rsquo;re using <a href="https://code.google.com/p/elmah/">Elmah</a> for this purpose.</p>

<p>We&rsquo;re making extra effort to find the balance between performance and reliability. Because Kiwi will probably deal with various sizes of data from small to very large depending on the survey, it has to be able to favor reliability over performance when necessary. For those scenarios with very large input data we&rsquo;ve been working on reducing the memory footprint and trade it off with some performance. In these scenarios loading all the data to the memory is simply not acceptable.</p>

<h2>Non-technical stuff</h2>

<p>Creating a product comes with a few standard challenges.</p>

<ul>
<li>We&rsquo;re creating a company logo and a logo for Kiwi.</li>
<li>We&rsquo;ve created the first draft of our license agreement. We&rsquo;re now looking for a professional who can review it and help us finalize it.</li>
<li>Deniz is continuously enhancing the documentation. It will be hosted on <a href="https://www.zendesk.com/">Zendesk</a>. Currently it&rsquo;s a separate entity but we want to incorporate it with the software in a way that Kiwi will know how to link to this documentation based on a given context and situation. I&rsquo;m not sure if we can finish this before the first version but it&rsquo;s definitely on our list.</li>
</ul>


<p>When <a href="http://en.wikipedia.org/wiki/Pareto_principle">Pareto principle</a> is applied to software development, it reveals that the last %20 of the development takes as much time as the first %80. Sounds scary huh? : ) but it certainly has some truth in it. We&rsquo;re now very close to 100% for the first version of Kiwi. The remaining things on our todo list are non-technical, the things around actually releasing the product.</p>

<p>Before wrapping this up I would like to thank our employer <a href="http://www.niposoftware.com/">NIPO Software</a> for their great support. We&rsquo;re frequently in touch and getting a lot of feedback. Really guys&hellip; Thanks a lot!</p>

<p>I&rsquo;ll keep writing as things happen. Good and bad. Transparency is the goal here.</p>

<p>Thank you for reading and as usual: feel free to drop a comment.</p>

<p>Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Building Kiwi]]></title>
    <link href="http://www.hakantuncer.com/blog/2014/11/01/building-kiwi/"/>
    <updated>2014-11-01T10:27:02+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2014/11/01/building-kiwi</id>
    <content type="html"><![CDATA[<p>I think it was sometime around February 2014 when Deniz Orsel, my colleague from <a href="http://www.niposoftware.com/" target="_blank">NIPO Software</a>, came to me and said &ldquo;I need you to build something&hellip;&rdquo;. Later it became apparent that he also already had discussed his idea with <a href="https://twitter.com/serifozcan" target="_blank">Serif Ozcan</a>, another colleague of mine in <a href="http://www.niposoftware.com/" target="_blank">NIPO Software</a> and convinced him.</p>

<p>&ldquo;Our customers are frequently asking for a tool like this yet it doesn&rsquo;t really fall under the category of &lsquo;Data collection&rsquo; that&rsquo;s why NIPO Software does not invest in this&rdquo; he said. As he explained, I realized it was a good opportunity and also a win &ndash; win situation for us and NIPO Software. I was convinced.</p>

<p>Startup life, starting a business and creating something valuable for people have always been interesting to me. I&rsquo;ve been developing software for almost 10 years now (wow time flies&hellip;) and I really enjoy doing it. But software by itself does not mean anything. It only finds its meaning in a context where it touches human lives.</p>

<p>Switching between these two worlds: &ldquo;mechanics of software&rdquo; and &ldquo;the context it touches and changes people&rsquo;s lives&rdquo; gives more meaning to what I do and how I work. Starting a business around software and creating products demands this frequent switching and even many more skills related to different disciplines like marketing, sales, legal and trading rules in the country one operates.</p>

<p>Even if we end up making no money or even wasting money, I knew we could learn a lot from this experience as a whole and that&rsquo;s what really matters to me and my friends.</p>

<h2>Ok fine but what is Kiwi?</h2>

<p><img src="http://www.hakantuncer.com/assets/Building_Kiwi/Kiwi_Highlights.png" alt="Kiwi Highlights" /></p>

<p>Not everyone reading this blog is working in the area of market research let alone even familiar with the technical market research terminology. So instead of a single long technical definition I&rsquo;ll try to list some facts about Kiwi:</p>

<ul>
<li>Kiwi is a web based application that can be hosted in the cloud or in customer premises.</li>
<li>Kiwi takes collected data that is either in NIPO or Triple-S format and transfers it to a SQL database in relational format and makes analysis &amp; monitoring a lot easier. Apart from the data itself, Kiwi will also create the questionnaire structure in the target SQL database as a reference.</li>
<li>Kiwi can transfer closed and open data files. It also allows consecutive transfers where it will continue adding to the existing data set in SQL without changing it.</li>
<li>For these reasons Kiwi can be used by any market research company that is utilizing data collection platforms built by NIPO Software or any other platform that supports Triple-S standard.</li>
</ul>


<h2>Demo</h2>

<p>I was planning to create a screencast to demonstrate how Kiwi works and what it does but didn&rsquo;t get around doing it as part of this blog post. That&rsquo;s high on my to-do list. Another post will be on its way soon.</p>

<h2>Going forward</h2>

<p>We&rsquo;re software developers and technologists. Our biggest strength is our technical side. The first version of Kiwi is more or less completed. We&rsquo;re still in the process of making it more robust and user friendly. We&rsquo;re also preparing a strong documentation. Deploying and using Kiwi should be a piece of cake. As well as troubleshooting it.</p>

<p>On the other hand we&rsquo;re totally newbies in a few other areas. We still need to:</p>

<ul>
<li><em>Start a company here in the Netherlands</em>. There are many things we need to figure out around taxation and legal aspects of starting a company and selling a product. It&rsquo;s currently a work in progress.</li>
<li><em>Figure out a pricing strategy</em>. We&rsquo;ve been discussing about this for a while but haven&rsquo;t come to a final decision yet. We&rsquo;re also gathering ideas from friends in NIPO Software.  It turns out that pricing is a much bigger concept than just simply putting a price tag on a product. It involves a bit more than that. Things get especially complicated around the topic of customer support.</li>
<li><em>Create a site for the product and decide on some kind of a payment methodology</em>. The company we&rsquo;re going to start will need a website. The product also needs a site of its own. When Kiwi becomes commercially available there will also be a payment system in place.</li>
</ul>


<p>Still a bunch of things to do. We&rsquo;ve been making steady progress but we&rsquo;re not in a hurry. Going at our own pace. Current target is to release Kiwi no later than 15th of January. No idea what happens next but one thing is clear: it will be adventurous.</p>

<p>Thanks for reading and if you have any comments please don&rsquo;t hesitate to add them below.</p>

<p>Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Playing around with Redis & SignalR]]></title>
    <link href="http://www.hakantuncer.com/blog/2014/10/26/playing-around-with-redis-and-signalr-part-1/"/>
    <updated>2014-10-26T19:32:27+01:00</updated>
    <id>http://www.hakantuncer.com/blog/2014/10/26/playing-around-with-redis-and-signalr-part-1</id>
    <content type="html"><![CDATA[<p>A good friend of mine contacted me a couple of weeks ago and asked if I would accept a freelancing project. Around research and prototyping. Possibly leading to a new architecture for their existing product. The existing architecture didn&rsquo;t allow any further room for the new requirements they had &ndash; he told me during our skype conversation. I thought it was fun and took the offer. R&amp;D and freelancing.. not bad huh!</p>

<p>So as part of the assignment I&rsquo;ve been doing some interesting reasearch and prototyping so why not blog about it as well I thought.</p>

<h2>Going technical:</h2>

<p>One of the requirements is to decouple the system components so that they can be deployed and run on different boxes. So a typical &ldquo;scaling out&rdquo; problem.</p>

<p>The other requirement is to enable these components to talk to each other about the changes happening through-out the system. So these components have to be able to send/receive messages to/from each other. This is especially important after separating these components obviously.</p>

<p>After studying the existing architecture and reading through some code, this was my initial design. I&rsquo;ve changed the application names to something more generic to keep it confidential but the technical idea behind it is still the same:</p>

<p><img src="http://www.hakantuncer.com/assets/Playing_Around_With_Redis/SystemArchitectureDiagram.png" alt="System Architecture Diagram" /></p>

<p>Let&rsquo;s look at some of the key components:</p>

<ul>
<li><strong>App Server</strong>: The application server is running a mission critical service that needs to be very fast. It is actually orchestrating incoming and outgoing voice calls, can&rsquo;t afford to be slow. Obviously there is also some bookkeeping that the application server does. The states of the calls and users change over time and this kind of application state information is also interesting to the other parts of the system for various reasons like monitoring, dashboards or some other type of actions that needs to be taken.</li>
<li><strong>Web UI</strong>: This is basically where customers will sign in and manage their system and data. They can do administrative work as well as look at various dashboards to see what is going on. This is going to become a self-hosted (yes OWIN) MVC 5 application.</li>
<li><strong>Web API</strong>: Most things that can be done with the Web UI should be done with API as well. So that customers can be creative and build their own solutions &amp; extensions. This will be built with Web API 2.0 and self hosted.</li>
</ul>


<p>I will tell more about the other components in the future posts. But careful readers should have already noticed that some of the requirements beg for a &ldquo;message broker&rdquo; / &ldquo;service bus&rdquo; type of a system in between to coordinate messaging.
Let&rsquo;s talk a bit about <a href="http://redis.io/" target="_blank">Redis</a> now.</p>

<h2>Redis:</h2>

<p>Here is the official definiton of Redis:</p>

<blockquote><p>Redis is an open source, BSD licensed, advanced key-value cache and store. It is often referred to as a data structure server since keys can contain strings, hashes, lists, sets, sorted sets, bitmaps and hyperloglogs.</p></blockquote>

<p>At <a href="http://www.niposoftware.com/" target="_blank">NIPO Software</a> we&rsquo;ve been using Redis for a while but frankly I didn&rsquo;t know that Redis was also supporting pub/sub messaging. As a solution the first thing that came to my mind was <a href="http://www.rabbitmq.com/" target="_blank">RabbitMQ</a>, which is a message broker. But Redis can do other interesting things as well. So I focused on Redis instead.</p>

<p>Here is what Wikipedia says about the &ldquo;Publish–subscribe pattern&rdquo;:</p>

<blockquote><p>In software architecture, publish–subscribe is a messaging pattern where senders of messages, called publishers, do not program the messages to be sent directly to specific receivers, called subscribers. Instead, published messages are characterized into classes, without knowledge of what, if any, subscribers there may be. Similarly, subscribers express interest in one or more classes, and only receive messages that are of interest, without knowledge of what, if any, publishers there are.</p></blockquote>

<p>And what Redis adds to it:</p>

<blockquote><p>This decoupling of publishers and subscribers can allow for greater scalability and a more dynamic network topology.</p></blockquote>

<p>Redis is also a cache store and a persistent storage. If you tell Redis to do so, it will take occasional snapshots of the data in it&rsquo;s memory and persist it to disk. As you progress through the Redis documentation it feels like Redis is all you need : ) F.ex here is where Redis snapshotting feature is configured:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
</pre></td><td class='code' width='100%'><pre><code class='bash'><div class='line'><span class="c">################################ SNAPSHOTTING  #################################</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c"># Save the DB on disk:</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c">#   save &lt;seconds&gt; &lt;changes&gt;</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c">#   Will save the DB if both the given number of seconds and the given</span>
</div><div class='line'><span class="c">#   number of write operations against the DB occurred.</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c">#   In the example below the behaviour will be to save:</span>
</div><div class='line'><span class="c">#   after 900 sec (15 min) if at least 1 key changed</span>
</div><div class='line'><span class="c">#   after 300 sec (5 min) if at least 10 keys changed</span>
</div><div class='line'><span class="c">#   after 60 sec if at least 10000 keys changed</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c">#   Note: you can disable saving at all commenting all the &quot;save&quot; lines.</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c">#   It is also possible to remove all the previously configured save</span>
</div><div class='line'><span class="c">#   points by adding a save directive with a single empty string argument</span>
</div><div class='line'><span class="c">#   like in the following example:</span>
</div><div class='line'><span class="c">#</span>
</div><div class='line'><span class="c">#   save &quot;&quot;</span>
</div><div class='line'><span class="c">#save 900 1</span>
</div><div class='line'><span class="c">#save 300 10</span>
</div><div class='line'><span class="c">#save 60 10000</span></div></code></pre></td></tr></table></div></figure>


<p>Depending on how critical your data is you can specify different levels of aggressiveness. As with everything the more aggressively you save the more stress you put on the system. On the other hand you can disable saving completely which will make Redis a purely caching server.</p>

<p>If you want to quickly get up and running with Redis I recommend the <a href="http://www.pluralsight.com/courses/building-nosql-apps-redis" target="_blank">Pluralsight course from John Sonmez</a>. It does a great job on getting you from zero to sixty.</p>

<h2>Redis on Windows</h2>

<p>Redis is an open source project and only supports Linux. But Microsoft Open Tech group develops and supports a <a href="https://github.com/MSOpenTech/redis" target="_blank">Windows port targeting Win64</a>. On the other hand I haven&rsquo;t seen a single source that recommends running Redis Windows in production even though Microsoft claims that it&rsquo;s heavily tested and production ready. General sentiment is like &ldquo;why would you do that when you can just run it on a Linux VM&rdquo; which I can understand for SAAS scenarios.</p>

<p>For the project that I&rsquo;m working on there is also installation scenarios on customer premises so asking them to get a Linux machine is a bit over the top my friend says. So we&rsquo;re willing to give the Microsoft Redis a chance. Hey these guys are also running <a href="http://azure.microsoft.com/en-us/services/cache/" target="_blank">Redis on Azure</a> after all&hellip;</p>

<p><a href="https://servicestack.net/" target="_blank">ServiceStack</a> is one of the frameworks that put focus on Redis. Supporting Redis is one of their selling points:</p>

<p><img src="http://www.hakantuncer.com/assets/Playing_Around_With_Redis/ServiceStack.png" alt="ServiceStack products" /></p>

<p>ServiceStack also distributes <a href="https://github.com/ServiceStack/redis-windows" target="_blank">MS Open Tech Redis port of Windows on GitHub</a>. If you want to run the Windows version of Redis there are very useful information here on how to install Redis Windows as a service or how to use <a href="http://docs-v1.vagrantup.com/v1/docs/getting-started/index.html" target="_blank">Vagrant</a> to install the Linux version of Redis on a Windows box with virtualization through <a href="https://www.virtualbox.org/" target="_blank">VirtualBox</a>.</p>

<h2>Redis C# Clients</h2>

<p>There are <a href="http://redis.io/clients" target="_blank">a bunch of clients</a> out there implemented for Redis with various languages. As of this writing this is how the list looks like for C#. The ones that are starred are the recommended clients by Redis.</p>

<p><img src="http://www.hakantuncer.com/assets/Playing_Around_With_Redis/RedisCSharpClients.png" alt="Redis C# Clients" /></p>

<p>I&rsquo;ve picked the ServiceStack client over StackExchange because of the richer and nicer to use library. It looks like the StackExchange client is claiming to be the fastest though.</p>

<p>Right after starting to use the latest ServiceStack Redis client I&rsquo;ve noticed that they&rsquo;ve switched to a commercial license with version 4. But <a href="https://github.com/ServiceStackV3/ServiceStackV3" target="_blank">the previous version 3</a> continues to be BSD license. So I fell back to this version after finding that out. Version 3 is also a pretty complete library and for my current purposes it doesn&rsquo;t really matter.</p>

<p>Here is how the API looks like (click <a href="http://mono.servicestack.net/img/Redis-annotated.png" target="_blank">here</a> for a version that you can zoom):</p>

<p><img src="http://www.hakantuncer.com/assets/Playing_Around_With_Redis/Redis-annotated.png" alt="Redis Client API Overview" /></p>

<h2>A User Scenario</h2>

<p>One of the scenarios that can be implemented with this prototype is as follows (remember the architecture diagram from the beginning of this post):</p>

<ul>
<li>When a user adds a record to the system through the Web UI (management site) the App Server needs to know about that record without going to the database.</li>
<li>When something interesting happens on the App Server the Web UI needs to be notified and then it should refresh the information on the connected clients&#8217; browsers. A typical dashboard scenario which should not require manual page refresh.</li>
</ul>


<p>Thanks for reading.</p>

<p>Hakan</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[After NDC Oslo 2014]]></title>
    <link href="http://www.hakantuncer.com/blog/2014/06/08/after-ndc-oslo-2014/"/>
    <updated>2014-06-08T15:39:52+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2014/06/08/after-ndc-oslo-2014</id>
    <content type="html"><![CDATA[<p>It&rsquo;s over. I&rsquo;m back in Amsterdam after an awesome week in Oslo. Great sessions, lots of smart people, delicious food and very good coffee. Inspirations everywhere.</p>

<p>I didn&rsquo;t know Norwegians were this much into coffee drinking. I can easily say that I didn&rsquo;t drink a single cup of bad coffee in Oslo in 7 days. One of the world&rsquo;s best coffee shop <a href="https://timwendelboe.no/">Tim Wendelboe</a> is also located in Oslo. But more on that later.</p>

<p>I&rsquo;ve seen a lot of stuff and spent time with very smart people.</p>

<p>Like I did with my previous conference visit in Microsoft / Seattle, I&rsquo;ll write down all the sessions I&rsquo;ve attended, together with the links to the video recordings.</p>

<p>I didn&rsquo;t know the sessions in NDC were recorded. That was a bit of a nice surprise in the beginning of the conference. Deciding which sessions to attended became a lot easier afterwards. Now I can basically see anything I missed if I want.</p>

<h2>Workshops</h2>

<p>Attending the workshops was the best decision we&rsquo;ve made. By far the most educative part of the conference. 2 days of workshop gives enough time to properly dive into a broad topic, allows a good deal of Q/A and lab time.</p>

<p>The workshop I attended was titled as &ldquo;Identity and Access Control for modern web applications and API&rsquo;s&rdquo;. From <a href="https://twitter.com/leastprivilege">Dominick Baier</a> and <a href="https://twitter.com/BrockLAllen">Brock Allen</a>. 10 out of 10 for those guys. They were well prepared. They were also very responsive to the questions from the attendees.</p>

<p>Unfortunately there is no video recording here. I have pdf&rsquo;s and lab solutions which I&rsquo;ll share in a next blog post.</p>

<p>We&rsquo;ve covered everything from the old security techniques to the modern ones. Here are some of the main points:</p>

<ul>
<li>Using security tokens and claims based authentication &amp; authorization is the way to go in to the future.</li>
<li>Separating authentication to another shared service is a good technique once you have multiple services in your deployment. This security service will issue access tokens for other services in the system to consume. This avoids repetition of security related code in every other service in the system. Enables DRY. Single point of configuration and control. Good stuff.</li>
<li>Microsoft is already moving in this direction with <a href="http://owin.org/">OWIN</a> and <a href="http://www.asp.net/aspnet/overview/owin-and-katana/an-overview-of-project-katana">Katana</a>. Claims based identity is baked into the framework at the moment. And there are a number of Katana middlewares that implement token based authentication.</li>
</ul>


<p>I&rsquo;ve left the workshop with some ideas and improvements that can be applied to <a href="http://nfieldmr.com/get-started.aspx" target="_blank">Nfield</a>. Ideas that can enable securer access scenarios and can make security implementation more elegant.</p>

<h2>Keynote</h2>

<br>


<ul>
<li><a href="http://vimeo.com/97305189" target="_blank">It’s a Write/Read (Mobile) Web</a></li>
</ul>


<p>If you&rsquo;re doing anything remotely related to UI or UX design you have to see this keynote. Period.</p>

<p>More and more companies are realizing that the intuitiveness and ease of use of their applications are very critical to their competitive advantage. How many taps or clicks does it take to achieve something in your mobile application? Think again. It&rsquo;s a matter of people using or quiting it.</p>

<p>Luke Wroblewski will blow your mind with the statistics and examples he puts up on the screen.</p>

<h2>Sessions &ndash; 4 June 2014</h2>

<br>


<ul>
<li><p><a href="http://vimeo.com/97315938" target="_blank">Immutability, State and Scale &ndash; Functional, Distributed Applications in Azure</a></p></li>
<li><p><a href="http://vimeo.com/97318800" target="_blank">Banish Your Inner Critic</a></p></li>
</ul>


<p>I&rsquo;d read a couple of essays written by <a href="https://twitter.com/denisejacobs">Denise Jacobs</a> about creativity and productivity. I wanted to attend one of her sessions. She explains how to stop (or ignore) your inner critic that tries its best to scare you from failure and to kill your creativity.</p>

<ul>
<li><p><a href="http://vimeo.com/97329157" target="_blank">Seven Ineffective Coding Habits of Many Programmers</a></p></li>
<li><p><a href="http://vimeo.com/97337304" target="_blank">Async C# 5.0 &ndash; Patters For Real World Use</a></p></li>
<li><p><a href="http://vimeo.com/97344528" target="_blank">Builders versus breakers – 10 online attacks we could have easily prevented</a></p></li>
</ul>


<p><a href="https://twitter.com/troyhunt">Troy Hunt</a>&rsquo;s talks are like exciting science fiction movies. You don&rsquo;t want it to end, but time flies quickly. The title of the talk is self explanatory. It&rsquo;s about a bunch of very interesting online attacks happened in history and most destructive ones have happened in the last 2 years. Maybe this is a sign for what&rsquo;s about to come in the future. Data theft at its best.</p>

<br>


<ul>
<li><a href="http://vimeo.com/97349267" target="_blank">Managing Asynchronicity</a></li>
</ul>


<p>One doesn&rsquo;t get to see <a href="http://en.wikipedia.org/wiki/Douglas_Crockford">Douglas Crockford</a> in person everyday. Functional programming and asynchronicity are two hot topics of the new era. Crockford talks about what asynchronicity is, its effects to our programs and how we can best test these async scenarios using a testing tool called <a href="http://www.jscheck.org">JSCheck</a>.</p>

<h2>Sessions &ndash; 5 June 2014</h2>

<br>


<ul>
<li><a href="http://vimeo.com/97408202" target="_blank">Javascript Combinators</a></li>
</ul>


<p>I&rsquo;m finding Javascript combinators very interesting. Javascript has <a href="http://en.wikipedia.org/wiki/First-class_function">first class functions</a> meaning that a lot of interesting things can be done with them. Once you start combining and decorating functions with other functions, very interesting ways of expressing programs start to appear.</p>

<p>Surprisingly programs become DSL-like and more readable because instead of &ldquo;HOW&rdquo; the program syntax starts to tell &ldquo;WHAT&rdquo;. Making it more declarative than imperative.</p>

<p>I really loved this session and the way <a href="https://twitter.com/raganwald">Reginald Braithwaite</a> presented it. I&rsquo;m hoping to find time to read his book <a href="http://www.amazon.com/Javascript-Allong%C3%A9-Reginald-Braithwaite-ebook/dp/B00FLKRCVO">JavaScript Allonge</a>.</p>

<ul>
<li><p><a href="http://vimeo.com/97415351" target="_blank">An Actor&rsquo;s Life for Me – An introduction to the TPL Dataflow Library and asynchronous programming blocks</a></p></li>
<li><p><a href="http://vimeo.com/97419151" target="_blank">Zone out, check in, move on</a></p></li>
</ul>


<p>As programmers our &ldquo;flow&rdquo; is something sacred to us. When we&rsquo;re concentrated and in flow we must not be interrupted because it annoys us and costs us too much time to get back into flow again.</p>

<p><a href="https://twitter.com/ploeh">Mark Seemann</a> thinks interruptions are going to happen no matter what. Instead of trying to avoid them he focuses on ways of working that will allow him to get back into flow easier and much faster.</p>

<p>I&rsquo;ve come across a nice <a href="http://gallarotti.github.io/digitalian/commentary/how-to-minimize-distractions-recovery-time/">summary blog post</a> about this session.</p>

<br>


<ul>
<li><a href="http://vimeo.com/97473703" target="_blank">GitHub Power Tools</a></li>
</ul>


<p>This is a useful hands-on session on using GitHub. It&rsquo;s not focused on Git but more about what you can do with GitHub itself. GitHub is more than only Git and has many features for letting developers collaborate on open source projects effectively.</p>

<ul>
<li><p><a href="http://vimeo.com/97501414" target="_blank">Node.JS Tools For Front-End Developers</a></p></li>
<li><p><a href="http://vimeo.com/97505678" target="_blank">The Future of ASP.NET Part II</a></p></li>
<li><p><a href="http://vimeo.com/97507560" target="_blank">From Code Monkey to Boss Man</a></p></li>
<li><p><a href="http://vimeo.com/97454683" target="_blank">Fun with JavaScript</a></p></li>
</ul>


<h2>Sessions &ndash; 6 June 2014</h2>

<br>


<ul>
<li><a href="http://vimeo.com/84676527" target="_blank">Functional Programming: What? Why? When?</a></li>
</ul>


<p>Just like with Douglas Crockford, you don&rsquo;t leave a conference without attending a session given by <a href="https://twitter.com/unclebobmartin">Bob Martin</a>. This is one of those talks with some &ldquo;aha&rdquo; moments about functional programming.</p>

<p>One thing that I found really interesting is a book that Uncle Bob mentions during his talk. The book is called <a href="http://mitpress.mit.edu/sicp/full-text/book/book.html">Structure and Interpretation of Computer Programs</a> which he praised a lot. At some point during his talk he said something along the lines of the following:</p>

<blockquote><p>..almost near the end of the book the authors wrote a couple of pages worth apologies on what&rsquo;s about to come, and then they introduced the assignment statement..</p></blockquote>

<p>This amazed me. They could write almost the whole book without the assignment statement (read as pure functional) and then they introduced it like as if it was a defect in software programs. Funny.</p>

<ul>
<li><p><a href="http://vimeo.com/97516214" target="_blank">Data Modeling Examples in the Real World with MongoDB</a></p></li>
<li><p><a href="http://vimeo.com/97519532" target="_blank">Transforming your C# code to functional style</a></p></li>
</ul>


<p>One of the most effective and indulging sessions I&rsquo;ve attended in this conference. I highly recommend everybody to see it. Don&rsquo;t expect complex code examples. <a href="https://twitter.com/venkat_s">Venkat Subramaniam</a> uses simple examples to make his point. Just listen to what he has to say about functional programming, he&rsquo;ll open up your mind.</p>

<br>


<ul>
<li><a href="http://vimeo.com/97530814" target="_blank">How I hacked my way to Norway</a></li>
</ul>


<p>Another Troy Hunt show off session. He talks about a couple of highly effective web attacks. Watch it if you&rsquo;re looking for fun, but basically it all comes down to a couple of main points:</p>

<ol>
<li><p>Never ever display a login form on an HTTP connection. Even if you&rsquo;re posting that form to an HTTPS endpoint. A man in the middle can change the form to somewhere else and steal your credentials without you knowing it. Turns out that Iranian government used this technique to steal its citizens&#8217; Facebook credentials for a while before Facebook woke up and made their login page HTTPS only.</p></li>
<li><p>Always be careful with SQL injection. If you&rsquo;re using latest frameworks you&rsquo;re mostly covered.</p></li>
<li><p>Make sure your username &amp; password challenge is computationally costly and time-consuming. If an attacker gets a hold of your user database and decides to convert them to clean text, he should be slowed down. It turns out that simple hashing and salting algorithms are easy to break with rainbow table attacks. Even the ASP.NET Membership implementation from 2010.</p></li>
</ol>


<br>


<ul>
<li><p><a href="http://vimeo.com/97537675" target="_blank">Towards an Evolutionary Architecture</a></p></li>
<li><p><a href="http://vimeo.com/97541185" target="_blank">Core Software Design Principles</a></p></li>
</ul>


<p>This is what I want to share right now. Maybe I can dive into a number of these topics in some of my next blog posts. Thanks for reading.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NDC Oslo 2014]]></title>
    <link href="http://www.hakantuncer.com/blog/2014/05/13/ndc-oslo-2014/"/>
    <updated>2014-05-13T22:24:08+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2014/05/13/ndc-oslo-2014</id>
    <content type="html"><![CDATA[<p>Yes! It&rsquo;s happening. We will be at <a href="http://www.ndcoslo.com/" target="_blank">NDC Oslo 2014</a> with 3 developers from <a href="http://www.niposoftware.com/" target="_blank">NIPO Software</a>. <a href="https://twitter.com/bjorn_coltof" target="_blank">Bjorn Coltof</a>, <a href="https://twitter.com/serifozcan" target="_blank">Serif Ozcan</a> and I are going to be there between 2-6th of June. We&rsquo;ll be attending the conference as well as the pre-conference workshops. We&rsquo;re all pretty excited and it&rsquo;s going to be awesome. Connect with us if you&rsquo;re also going to be there! We can have a chat over a beer or two. All beers are on NIPO Software! (just testing if Jeroen Noordman, our CEO, is reading this post. I should soon find out).</p>

<p>Let&rsquo;s get to the conference content. The sessions are so great that you wish you could have mitosis and attend at least a couple of them at the same time. But again life is all about priorities. Clarifying the priorities is tough.</p>

<p>My thought process involved asking myself these questions:</p>

<ul>
<li>Am I particularly interested in the main subject of this session? (Doh!)</li>
<li>Is this session content something I can find in books, online documents or Pluralsight courses? How original is it?</li>
<li>..and of course it&rsquo;s preferable that I can apply this knowledge somewhere in the office like on <a href="http://nfieldmr.com/get-started.aspx" target="_blank">Nfield</a>.</li>
</ul>


<p>There is a bunch of <a href="http://www.ndcoslo.com/pre-conference-workshops" target="_blank">pre-conference workshops</a> that will take place in the first 2 days, right before the conference starts. First choice had to be made here. This is something you can&rsquo;t change afterwards. It&rsquo;s printed on the ticket.</p>

<p>In the end Bjorn and I picked <a href="http://www.ndcoslo.com/pre-conference-workshop/identity-workshop/1750" target="_blank">Identity and access control for modern web applications and APIs (Dominick Baier &ndash; Brock Allen)</a> and Serif chose to stay away from us by enrolling in <a href="http://www.ndcoslo.com/pre-conference-workshop/angularjs-workshop/1865" target="_blank">AngularJS workshop (Scott Allen)</a>. Can&rsquo;t really blame him, I love Scott Allen&rsquo;s <a href="http://pluralsight.com/training/Authors/Details/scott-allen" target="_blank">Pluralsight courses.</a></p>

<p>The most tricky part in this selection is that all &ldquo;interesting&rdquo; single day workshops are set for 3rd of June. So it becomes very hard to pick two separate single day workshops. This also goes as a feedback to NDC organizers. Don&rsquo;t do that again!</p>

<p>After we hack enough code during these 2 day workshops the actual conference will start. Here are screenshots from the agenda together with my selections based on priority. I&rsquo;ve color coded the talks on the calender:</p>

<br>


<ul>
<li><span style="color:red">Highest priority.</span></li>
<li><span style="color:orange">Middle priority. Go to this one if you can&rsquo;t somehow make the one above.</span></li>
<li><span style="color:green">Low priority. Go to this one if you can&rsquo;t make neither of above.</span></li>
</ul>


<p><img src="http://www.hakantuncer.com/assets/NDCOslo2014/NDCOslo_Wednesday.png" alt="NDC Oslo Wednesday Sessions" /></p>

<br>


<hr>


<p><img src="http://www.hakantuncer.com/assets/NDCOslo2014/NDCOslo_Thursday.png" alt="NDC Oslo Thursday Sessions" /></p>

<br>


<hr>


<p><img src="http://www.hakantuncer.com/assets/NDCOslo2014/NDCOslo_Friday.png" alt="NDC Oslo Friday Sessions" /></p>

<p>This is obviously A LOT OF new stuff. Here is the list of technologies I should get myself familiar with to avoid showing up clueless in the sessions:</p>

<p><img src="http://www.hakantuncer.com/assets/NDCOslo2014/NDCOslo_LearningList.png" alt="NDC Oslo Learning List" /></p>

<p>That&rsquo;s it for now. Probably more posts will follow during and after the conference.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Disaster Recovery on Azure]]></title>
    <link href="http://www.hakantuncer.com/blog/2014/04/27/disaster-recovery-on-azure/"/>
    <updated>2014-04-27T19:30:37+02:00</updated>
    <id>http://www.hakantuncer.com/blog/2014/04/27/disaster-recovery-on-azure</id>
    <content type="html"><![CDATA[<br/><br/>


<blockquote><h4>UPDATE:</h4>

<p>Things keep changing &amp; improving really FAST on Azure. This post may not reflect the latest capabilities in terms of Disaster Recovery for Azure Applications. Make sure to read the subject on <a href="https://msdn.microsoft.com/en-us/library/azure/dn251004.aspx">MSDN</a> as well.</p></blockquote>

<p>There are things we tend to ignore. Things that we don&rsquo;t want to spend time on or think about because there are no immediate benefits. Disaster recovery is one of those topics. The chances are fairly low, but the impact on our business is catastrophic. The consequences can go as far as losing the business completely. Unless there is some sort of a disaster recovery plan in place.</p>

<p>Because I&rsquo;m working with Microsoft Azure on a daily basis as part of my job, I&rsquo;ll be focusing on Azure but the fundamental principles and concepts should be universal for every cloud platform, or even for on premises type scenarios.</p>

<h2>Two key objectives</h2>

<br>


<blockquote><h5>Recovery Time Objective (RTO)</h5>

<p>Recovery Time Objective is the maximum amount of time allocated for restoring application functionality.</p></blockquote>

<p>This is usually a requirement coming from the business. Basically the question is how critical is your platform and how much down time can you tolerate in such a catastrophic event?</p>

<blockquote><h5>Recovery Point Objective (RPO)</h5>

<p>The recovery point objective (RPO) is the acceptable time window of lost data due to the recovery process.</p></blockquote>

<p>For example, if the RPO is one hour, you must completely back up or replicate the data at least every hour. Once you bring up the application in an alternate datacenter, the backup data may be missing up to an hour of data. Like RTO, critical applications target a much smaller RPO.</p>

<p>These two key objectives determine the approach that needs to be followed and therefore the effort and cost of the whole disaster recovery plan.</p>

<p>The purpose of this blog post is not to describe solutions for each possible combination of these two objectives, but to describe a couple of approaches that can tolerate relatively long recovery time objective (~24 hours) with a more aggressive (so short) recovery point objective.</p>

<p>Don&rsquo;t forget that having a short RTO and RPO together can be both costly and complex to implement depending on the storage needs of your applications.</p>

<h2>Running business on a single datacenter</h2>

<p>Let&rsquo;s say you haven&rsquo;t thought on a disaster recovery plan yet. If your software is deployed on a single datacenter and making use of Azure Storage and/or Azure SQL Database you are at risk of losing your business should your datacenter goes dark due to a disaster or a catastrophic failure.</p>

<p>An Azure datacenter is equipped with fault domains and redundancy to keep your service highly available but these are all inside the datacenter. If the whole datacenter goes down all the compute instances, databases and storage services will go down with it.</p>

<p><img src="http://www.hakantuncer.com/assets/Disaster_Recovery_On_Azure/Single_Region_Deployment.png" width="500" height="438" title="'Single Region Deployment'" ></p>

<p>Assuming that you still have your software in-house somewhere, there should be no risk of losing the compute instances forever. By creating and deploying the cloud packages on another datacenter the compute instances can be recovered. <strong>The key to business continuity is to be able to recover the data that is stored on Azure Storage and Azure SQL Databases.</strong></p>

<h2>Frequently backup data outside the datacenter</h2>

<p>Whatever the recovery objectives are, backing up application data outside of the datacenter is a must for business continuity. How frequently the data is backed up or synced outside the datacenter will determine the recovery point objective.</p>

<p>When there are backups available outside the datacenter, the environment can be moved to another datacenter by restoring the data and installing compute instances using existing cloud service packages.</p>

<p><img src="http://www.hakantuncer.com/assets/Disaster_Recovery_On_Azure/Redeploy_Azure_Datacenter.png" alt="Redeploy to another datacenter" /></p>

<p>This is called &ldquo;redeploy&rdquo; recovery model and as you might already guess has a long recovery time objective. All the individual pieces of the environment needs to be moved to another datacenter and redeployed.</p>

<h2>How to backup Azure data (together with RPO and RTO considerations)</h2>

<br><br>


<h4>1. Azure Storage</h4>

<p>The good news is that Azure Storage Service has built-in replication strategies. Two of them are geographical redundancy, meaning that all storage data is replicated across datacenters. That&rsquo;s exactly what disaster recovery is about.</p>

<p><img src="http://www.hakantuncer.com/assets/Disaster_Recovery_On_Azure/Azure_Storage_Redundancy.png" alt="Azure Storage Geo Redundancy" /></p>

<p>The difference between &ldquo;Geo Redundant&rdquo; and &ldquo;Read-Access Geo Redundant&rdquo; is that the latter allows the redundant data to be accessed at all times in a read-only fashion. This brings us to another important point:</p>

<blockquote><p>Here is what Microsoft&rsquo;s documentation say about the estimated azure storage failover time in case of a disaster:  &ldquo;estimated time that the data will be accessible to customers after a disaster is 24 hours.&rdquo;</p></blockquote>

<p>In the light of these information 3 options appear for backing up the Azure Storage:</p>

<ul>
<li><strong>Geo-Redundancy</strong>: There is no SLA but RPO is practically very short. RTO is long. Only after about 24 hours the failover process will be completed by Microsoft and the data will be available again.</li>
<li><strong>Read-Access Geo Redundant</strong>: RPO is again the same as above. However almost immediately the redundant data can be accessed (read-only) which allows systems to run in a degraded mode (if they&rsquo;re designed in such a fault tolerant way of course). Then again in 24 hours everything will be fully operational.</li>
<li><strong>Custom</strong>: If RTO needs to be shorter, the only option is to look for a third party product that can replicate an azure storage to another datacenter. This redundant storage will always be available in Read/Write mode (since it&rsquo;s just another regular storage account, only in another geographical region).</li>
</ul>


<br>


<h4>2. Azure SQL Databases</h4>

<p>Yesterday I woke up to an <a href="http://view.email.microsoftemail.com/?j=fe9016787161057a71&amp;m=fe621570756503797d1c&amp;ls=fe1817787c60027e711d79&amp;l=fec21c767365017e&amp;s=fe2212717465037a701d78&amp;jb=ff5e177873&amp;ju=fe5711777060017b7611">annoucement from Microsoft</a> introducing new types of databases in Azure with new disaster recovery features:</p>

<p><img src="http://www.hakantuncer.com/assets/Disaster_Recovery_On_Azure/DisasterRecoveryPerDatabaseType.png" alt="Disaster Recovery Per Database Type" /></p>

<p>Let&rsquo;s look at each option and see what it means:</p>

<ul>
<li><strong>Restore to an alternate Azure region</strong>: This phrase means &ldquo;no silver bullet&rdquo;. Basic type database owners are responsible with their own backup and restore operations. Luckily there is a convenient way to backup and restore an Azure SQL Database regardless of its type.</li>
</ul>


<br>


<h5>Automatic Database Export:</h5>

<p>Actually there are a couple of ways to replicate or backup a database. But most of these options have their own shortcomings for disaster recovery. There is a feature called <a href="http://msdn.microsoft.com/en-US/library/azure/ff951624.aspx">Database Copy</a> which creates a <a href="http://technet.microsoft.com/en-us/library/ms151176.aspx">transactionally consistent replica</a> of the source database in <strong>the same datacenter.</strong> Because the replica resides in the same datacenter there is no geo-redundancy. But after the copying is completed, this database can be exported to a storage account in another datacenter.</p>

<p>This is exactly what <strong>Automatic Database Export</strong> feature does. It first replicates the database with a copy operation, thus getting a transactionally consistent copy of the database, then exports it to the storage account that is configured. To see how it is configured you can visit <a href="http://blogs.msdn.com/b/sql-bi-sap-cloud-crm_all_in_one_place/archive/2013/07/24/sql-azure-automated-database-export.aspx">this blog post</a>.</p>

<p>A direct manual export operation itself does not generate a transactionally consistent copy of a database. This means you may end up having an Order item in the database with a missing OrderDetails. Automatic Database Export however takes care of this problem. The documentation was not very clear on that so I asked the man himself:</p>

<br>




<blockquote class="twitter-tweet" lang="en"><p><a href="https://twitter.com/hakant">@hakant</a> <a href="https://twitter.com/Azure">@Azure</a> yes I&#39;m pretty sure it is</p>&mdash; Scott Guthrie (@scottgu) <a href="https://twitter.com/scottgu/statuses/460180886915276801">April 26, 2014</a></blockquote>


<script async src="http://www.hakantuncer.com//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>So we&rsquo;re on the right track here.</p>

<br>


<blockquote><p><strong>Attention:</strong> First part of Automatic Database Export is the replication of the database with Database COPY operation which runs two databases at the same time. This means export operations are partially doubling the database costs.</p></blockquote>

<p>So far so good&hellip; But what determines RTO and RPO for Automatic Database Export? This analysis depends on the frequency and the destination storage configured for the database export operation.</p>

<br>


<ul>
<li><em>Exporting to a separate storage account on another datacenter:</em></li>
</ul>


<p>In this scenario, the RPO will simply be around [Database Export Frequency]. If the database is exported every 6 hours, in the worst case scenario 6 hours of data may be lost.</p>

<p>RTO is simply the [Database Restore Duration]. No need to wait for Microsoft to execute the Azure Storage failover process. The database export file is immediately available on the storage account in the other datacenter.</p>

<br>


<ul>
<li><em>Exporting to the primary storage account on the same datacenter:</em></li>
</ul>


<p>In this scenario, we&rsquo;re relying on the Automated Azure Storage Geo-Replication to get the exported database transferred to another datacenter. Since this scenario uses the geo-replication feature of the storage account there won&rsquo;t be any additional costs for geo-reduntant storage. This is nice indeed.</p>

<p>But in the worst case scenario the RPO can go as far as [2 * Database Export Frequency] if the datacenter happens to fail during the geo-replication process. In that case, the last export file won&rsquo;t be available after the failure but only the one before that will be.</p>

<p>On the other hand, the RTO is [Estimated Azure Storage Geo-Failover Time + Database Restore Duration]. Again, Microsoft&rsquo;s estimation for Azure Storage geo-failover is around 24 hours.</p>

<p>So the moral of the story is that having a dedicated separate Azure Storage account on the other datacenter is beneficial for both RPO and RTO. But as usual the downside is financial. The separate storage account is also billed separately. Both for storage and bandwith to transfer the data. Though it&rsquo;s also worth mentioning that Azure Storage is <a href="http://azure.microsoft.com/en-us/pricing/details/storage/">fairly cheap</a>.</p>

<p>Now let&rsquo;s move to the other disaster recovery features.</p>

<ul>
<li><p><strong>Geo-Replication Passive Replica</strong>: Unfortunately there is no documentation available for this mysterious feature yet. Frankly there is no single mention of this feature anywhere else at the time of this writing. So the technique described above for the Basic databases also applies here until Microsoft actually ships this feature or shares more about it. I&rsquo;ll update this section when that happens.</p></li>
<li><p><strong>Active Geo-Replication</strong>: This one is a silver bullet solution. Unfortunately only the Premium database owners can make use of this feature. With Active Geo-Replication, you can create and maintain up to four readable secondary databases across geographic regions. Basically this gives a very short RPO and RTO for the price of running multiple Premium databases (<a href="http://azure.microsoft.com/en-us/pricing/details/sql-database/#basic-standard-and-premium">which is quite a lot</a>). You can read more about <a href="http://msdn.microsoft.com/en-US/library/azure/dn741339.aspx">Active Geo-Replication on MSDN</a>.</p></li>
</ul>


<h2>Final thoughts</h2>

<p>If your business can tolerate larger than ~24 hrs recovery time objective (RTO) Azure provides a couple of inexpensive features that you can already start making use of. These features also require very little effort to setup and you guarantee business continuity in case of a catastrophic event.</p>

<p>The most cost effective strategy is the following:</p>

<ol>
<li>Make sure your storage account is configured for Geo-Redundancy (default).</li>
<li>Turn on Automatic Database Export and configure a high frequency that makes sense. Keep track of how long this operation takes and adjust your frequency based on that as well.</li>
<li>Set your default azure storage account as the destination of automatic database export. So rely on the geo-redundancy of your storage account.</li>
</ol>


<p>If you need a shorter RTO build up on this strategy. This post is mainly focused on &ldquo;Redeploy&rdquo; pattern. There are other patterns available on MSDN and some are focused on more aggressive RTO&rsquo;s. I recommend reading: <a href="http://msdn.microsoft.com/en-us/library/dn251004.aspx">Disaster Recovery and High Availability for Azure Applications</a>.</p>

<h2>References</h2>

<p>Most information on this blog post is obtained from the following MSDN pages. Some others are direct observations &amp; usage from Azure Management Portal.</p>

<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/dn251004.aspx">Disaster Recovery and High Availability for Azure Applications</a></li>
<li><a href="http://msdn.microsoft.com/library/azure/hh852669.aspx">Azure SQL Database Business Continuity</a></li>
<li><a href="http://msdn.microsoft.com/en-US/library/azure/ff951624.aspx">Copying Databases in Azure SQL Database</a></li>
<li><a href="http://msdn.microsoft.com/en-US/library/azure/hh335292.aspx">How to: Import and Export a Database (Azure SQL Database)</a></li>
<li><a href="http://blogs.msdn.com/b/windowsazure/archive/2014/04/04/sql-database-updates-coming-soon-to-the-premium-preview.aspx">SQL Database updates coming soon to the Premium preview</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
